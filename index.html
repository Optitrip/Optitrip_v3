<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" defer>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
    integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
  <link rel="icon" href="/logo_optitrip.png" sizes="20x20" type="image/png">
  <link rel="apple-touch-icon" href="/logo_optitrip.png">
  <link rel="mask-icon" href="/logo_optitrip.png" color="#FFFFFF">
  <meta name="theme-color" content="#FFFFFF">
  <link rel="stylesheet" type="text/css" href="https://js.api.here.com/v3/3.1/mapsjs-ui.css" />
  <script type="text/javascript" src="https://js.api.here.com/v3/3.1/mapsjs-core.js"></script>
  <script type="text/javascript" src="https://js.api.here.com/v3/3.1/mapsjs-service.js"></script>
  <script type="text/javascript" src="https://js.api.here.com/v3/3.1/mapsjs-ui.js"></script>
  <script type="text/javascript" src="https://js.api.here.com/v3/3.1/mapsjs-mapevents.js"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Lato:wght@700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
    integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">
  <link href="https://cdn.jsdelivr.net/npm/@sweetalert2/theme-dark@4/dark.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
    crossorigin="anonymous"></script>
  <script src="/src/decode.js" defer></script>
  <script src="/src/here.js" defer></script>
  <title>OptiTrip</title>
</head>

<body>
  <div id="app-container" style="display: block;">
    <nav class="navbar navbar-expand-lg navbar-light p-0" style="background: linear-gradient(#c6c6c6, #767676);">
      <div class="container-fluid">
        <!-- Toggle button -->
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
          aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation" style="margin-left: 10px;">
          <span class="navbar-toggler-icon"></span>
        </button>

        <!-- Logo -->
        <a class="navbar-brand" href="#">
          <img src="/logo_optitrip.png" alt="" height="35" />
        </a>

        <div class="collapse navbar-collapse" id="navbarNav" style="height: 50px;">
          <ul class="navbar-nav me-auto mb-lg-0">
            <li class="nav-item" style="text-align: center;" id="menuMap">
              <a class="nav-link btn btn-primary d-flex justify-content-center align-items-center"
                style="height: 50px; border: none; border-radius: 0;">
                <i class="icon-icono-mapa upper-buttons"></i>
                <span class="upper-buttons-span">Mapa</span>
              </a>
            </li>
            <li class="nav-item" style="text-align: center;" id="menuRoutes">
              <a class="nav-link btn btn-outline-primary d-flex justify-content-center align-items-center"
                style="height: 50px; border: none; border-radius: 0;">
                <i class="icon-icono-rutas upper-buttons"></i>
                <span class="upper-buttons-span">Rutas</span>
              </a>
            </li>
            <!-- Otros elementos de navegación -->
            <li class="nav-item" id="menuReports">
              <a class="nav-link btn btn-outline-primary d-flex justify-content-center align-items-center"
                style="height: 50px; border: none; border-radius: 0;">
                <i class="icon-icono-reportes upper-buttons"></i>
                <span class="upper-buttons-span">Reportes</span>
              </a>
            </li>
            <!-- <li class="nav-item">
              <a class="nav-link btn btn-outline-primary d-flex justify-content-center align-items-center"
                style="height: 50px; border: none; border-radius: 0;">
                <i class="icon-icono-flotilla upper-buttons"></i>
                <span class="upper-buttons-span">Flota</span>
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link btn btn-outline-primary d-flex justify-content-center align-items-center"
                style="height: 50px; border: none; border-radius: 0;">
                <i class="icon-icono-mensaje upper-buttons"></i>
                <span class="upper-buttons-span">Mensajes</span>
              </a>
            </li> -->
            <li class="nav-item" id="menuUsers">
              <a class="nav-link btn btn-outline-primary d-flex justify-content-center align-items-center"
                style="height: 50px; border: none; border-radius: 0;">
                <i class="icon-icono-usuarios upper-buttons"></i>
                <span class="upper-buttons-span">Usuarios</span>
              </a>
            </li>
          </ul>
        </div>

        <!-- Notificaciones y Usuario -->
        <div class="navbar-user text-white d-flex align-items-center">
          <!-- Botón de notificaciones -->
          <button class="btn text-white mr-2" type="button" id="notificationsButton"
            style="position: relative; padding: 8px;">
            <img src="/public/iconos superiores/icono notificaciones.svg" alt="Notificaciones" style="width: 18px; height: 18px; filter: brightness(0) invert(1);">
          </button>
          <!-- Dropdown de usuario -->
          <div class="dropdown">
            <button class="btn text-white dropdown-toggle" type="button" id="dropdownMenuButton"
              data-bs-toggle="dropdown" aria-expanded="false">
              <span id="user-count" style="font-size: 14px; font-weight: bold;"></span>
            </button>
            <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdownMenuButton"
              style="margin-left: -50px;">
              <!-- Opciones de usuario -->
              <li>
                <a class="dropdown-item" href="#">
                  <i class="icon-icono-configuracion mr-2"></i> Configuración
                </a>
              </li>
              <li>
                <a class="dropdown-item" href="#">
                  <i class="icon-icono-ayuda mr-2"></i> Ayuda
                </a>
              </li>
              <li>
                <a class="dropdown-item" id="logout" style="color: #3795fa;">
                  <i class="icon-icono-logout mr-2"></i> Cerrar sesión
                </a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </nav>

    <div id="root"></div>
    <div class="menu-container" style="overflow-y: auto">
      <!-- <div style="width: 80px; padding: 5px; display: flex; flex-direction: column;" class="bottom-fixed-buttons">
        <button class="btn btn-outline-primary border-0" disabled>
          <i class="icon-icono-monitor" style="font-size: 45px;"></i>
          <strong>Monitor</strong>
        </button>
        <button id="menuRoutes" class="btn btn-outline-primary border-0">
          <i class="icon-icono-rutas" style="font-size: 45px;"></i>
          <strong>Rutas</strong>
        </button>
        <button class="btn btn-outline-primary border-0" disabled>
          <i class="icon-icono-historial" style="font-size: 45px;"></i>
          <strong>Historial</strong>
        </button>
      </div> -->
      <div id="map-drivers"
        style="width: calc(100% - 0px); height: calc(100vh - 50px); overflow: hidden; position: relative;">
      </div>
      <div id="users"
        style="width: calc(100% - 0px); height: calc(100vh - 50px); overflow: hidden; position: relative; display: none;">
        <div class="container-fluid">
          <div id="card-users-info"></div>
        </div>
      </div>
      <div id="reports"
        style="width: calc(100% - 0px); height: calc(100vh - 50px); overflow: hidden; position: relative; display: none;">
        <div class="container-fluid">
          <div id="card-reports-info"></div>
        </div>
      </div>
    </div>

    <div id="map-routes-container">
      <div id="map" style="width: calc(100% - 0px); height: calc(100vh - 50px); overflow: hidden; position: relative;">
      </div>
    </div>

    <div id="panels-stack" style="width: 320px; position: absolute; top: 60px; left: 10px; z-index: 1000; display: flex; flex-direction: column; gap: 10px;">

    <div id="tracing-driver" style="width: 100%; display: block;">
      <div class="card" style="height: fit-content; max-height: calc(100vh - 55px - 20px); overflow: hidden; border-radius: 10px;">
        <div class="card-header" id="header-tracing" 
             style="display: flex; justify-content: center; align-items: center; position: relative; padding: 3px; background-color: #FB8800; color: white; cursor: pointer; height: 35px;">
          
          <span style="font-weight: bold; font-size: 14px;">Diagrama de cuentas</span>
          
          <div style="position: absolute; right: 10px; display: flex; align-items: center;">
             <button id="btn-minimize-tracing" style="border: none; background: none; color: white; padding: 0;">
                <i class="icon-circle-up"></i>
             </button>
             <button id="btn-maximize-tracing" style="border: none; background: none; color: white; padding: 0; display: none;">
                <i class="icon-circle-down"></i>
             </button>
          </div>
        </div>
        
        <div class="card-body p-0" id="body-tracing">
          <div id="tracing-container"></div>
        </div>
      </div>
    </div>

    <div id="alerts-wrapper" style="width: 100%;"></div>

</div>

    <div id="create-route" style="width: 320px; position: absolute; top: 60px; left: 10px; display: none;">
      <div class="card"
        style="height: fit-content; max-height: calc(100vh - 55px - 20px); overflow: hidden; border-radius: 10px;">
        <div class="card-header" id="card-create-route"
          style="display: flex; justify-content: space-between; align-items: center; position: relative; padding: 3px;">
          <span style="position: absolute; left: 50%; transform: translateX(-50%);">Creación de rutas</span>
          <div style="display: flex; align-items: center; margin-left: auto;">
            <button id="btn-minimize" style="border: none; background: none; margin-right: 8px; margin-top: 3px;">
              <i class="icon-circle-up"></i>
            </button>
            <button id="btn-maximize"
              style="border: none; background: none; margin-right: 8px; margin-top: 3px; display: none;">
              <i class="icon-circle-down"></i>
            </button>
          </div>
        </div>
        <div class="card-body p-0" style="overflow-y: auto; overflow-x: hidden;">
          <div class="p-2" id="react-container"></div>
          <div id="container-btn" class="pl-2 pb-2 text-center">
            <button class="btn btn-route mx-5 btn-clean disabled" type="button"
              style="background-color: #767676;">Limpiar</button>
            <button class="btn btn-route mx-5 btn-calculate disabled" type="button">Calcular</button>
          </div>
        </div>
      </div>
    </div>

    <div id="show-routes" style="width: 320px; position: absolute; top: 60px; left: 10px; display: none;">
      <div class="card"
        style="height: fit-content; max-height: calc(100vh - 55px - 20px); overflow: hidden; border-radius: 10px;">
        <div class="card-header" id="card-show-routes"
          style="display: flex; justify-content: space-between; align-items: center; position: relative; padding: 3px;">
          <span id="show-route-header" style="position: absolute; left: 50%; transform: translateX(-50%);">Resultados de
            la ruta</span>
          <div style="display: flex; align-items: center; margin-left: auto;">
            <button id="btn-minimize-routes"
              style="border: none; background: none; margin-right: 8px; margin-top: 3px;">
              <i class="icon-circle-up"></i>
            </button>
            <button id="btn-maximize-routes"
              style="border: none; background: none; margin-right: 8px; margin-top: 3px; display: none;">
              <i class="icon-circle-down"></i>
            </button>
          </div>
        </div>
        <div id="cardRoutesShow" class="card-body p-0" style="overflow-y: auto; overflow-x: hidden;">
          <div class="p-2" id="data-routes"></div>
          <div class="pl-2 pr-2">
            <div class="card mb-2">
              <div class="card-header text-center p-0 card-title">
                Resultados
              </div>
              <div id="routes-container" class="card-body pt-2 pl-2 pr-2 pb-0" style="background: #E4E4E4;"></div>
            </div>
          </div>
          <div id="container-btn-routes" class="pl-2 pb-2 text-center">
            <button class="btn text-white mx-5 btn-edit" type="button"
              style="background: #FB8800; border: none; border-radius: 5px;" onclick="toggleRoutes()">Editar</button>
          </div>
        </div>
      </div>
    </div>

    <div id="show-indications" style="width: 320px; position: absolute; top: 60px; left: 10px; display: none;">
      <div class="card"
        style="height: fit-content; max-height: calc(100vh - 55px - 20px); overflow: hidden; border-radius: 10px;">
        <div class="card-header" id="card-show-indications"
          style="display: flex; justify-content: space-between; align-items: center; position: relative; padding: 3px;">
          <span id="show-indication-header"
            style="position: absolute; left: 50%; transform: translateX(-50%);">Resultados
            de la ruta</span>
          <div style="display: flex; align-items: center; margin-left: auto;">
            <button id="btn-minimize-indications"
              style="border: none; background: none; margin-right: 8px; margin-top: 3px;">
              <i class="icon-circle-up"></i>
            </button>
            <button id="btn-maximize-indications"
              style="border: none; background: none; margin-right: 8px; margin-top: 3px; display: none;">
              <i class="icon-circle-down"></i>
            </button>
          </div>
        </div>
        <div id="cardIndShow" class="card-body p-0" style="overflow-y: auto; overflow-x: hidden;">
          <div class="p-2" id="indications-route"></div>
          <div class="pl-2 pr-2">
            <div class="card mb-2">
              <div class="card-header text-center p-0 card-title">
                Resultados
              </div>
              <div id="indications-container" class="card-body p-0" style="background: #E4E4E4;"></div>
            </div>
          </div>
          <div id="container-btn-indications" class="pb-2 text-center d-flex justify-content-center align-items-center">
            <button class="btn btn-primary mx-5 btn-return" style="border: none; border-radius: 5px; height: 32px;"
              type="button" onclick="returnToRoutes()">Atrás</button>
            <div id="print-route"></div>
          </div>
        </div>
      </div>
    </div>
    <div id="assign-route"></div>
  </div>

  <div id="login-form" style="display: none;">
    <div class="background-image" style="overflow-y: auto;">
      <div class="container" style="max-width: 380px;">
        <div class="row justify-content-center">
          <div class="col-md-12">
            <div class="card" style="border-radius: 10px;">
              <div class="card-body">
                <form>
                  <div class="mb-3 p-5 text-center">
                    <img src="/logo_optitrip.png" alt="" height="150" />
                  </div>
                  <div class="mb-3 pl-4 pr-4">
                    <input type="text" class="form-control" id="email" name="email" placeholder="Usuario">
                  </div>
                  <div class="mb-2 pl-4 pr-4">
                    <input type="password" class="form-control" id="password" name="password" placeholder="Contraseña">
                  </div>
                  <div class="mb-5 pl-4 pr-4">
                    <div class="form-check">
                      <input class="form-check-input" type="checkbox" id="rememberMe">
                      <label class="form-check-label" for="rememberMe">Recordar contraseña</label>
                      <a href="#" class="float-right">¿Olvidó su contraseña?</a>
                    </div>
                  </div>
                  <div class="mb-2 pl-4 pr-4">
                    <button type="submit" class="btn btn-primary" style="width: 100%;">Iniciar sesión</button>
                  </div>
                  <div class="mb-3 pl-4 pr-4 text-center">
                    ¿No tienes cuenta? <a class="ml-5"
                      href="https://docs.google.com/forms/d/e/1FAIpQLSdJ2UJEUc7Voyq-z1X3VslB-Nc8QwA1a2c-2IQL9u8MyGLpXg/viewform"
                      target="_blank">Registrarse</a>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/jwt-decode@3.1.2/build/jwt-decode.min.js"></script>
  <script type="module" src="/src/main.jsx"></script>
  <script type="module" src="/src/script.js"></script>
  <script type="module" src="/src/main.js"></script>
  <script>
    function toggleRoutes() {
      const createRouteContainer = document.getElementById('create-route');
      const showRouteContainer = document.getElementById('show-routes');
      createRouteContainer.style.display = createRouteContainer.style.display === 'none' ? 'block' : 'none';
      showRouteContainer.style.display = showRouteContainer.style.display === 'none' ? 'block' : 'none';
    }

    function returnToRoutes() {
      const showIndications = document.getElementById('show-indications');
      const showRoutes = document.getElementById('show-routes');
      showIndications.style.display = showIndications.style.display === 'none' ? 'block' : 'none';
      showRoutes.style.display = showRoutes.style.display === 'none' ? 'block' : 'none';
    }
  </script>
</body>

</html>