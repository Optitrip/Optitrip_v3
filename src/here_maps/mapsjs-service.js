
/**
 * The code below uses open source software. Please visit the URL below for an overview of the licenses:
 * http://js.api.here.com/v3/3.1.54.2/HERE_NOTICE
 */

H.util.eval("Q.prototype.Un=ca(3,function(a){var b=this.getCache(),c=this;if(a!==z){C(a,Vj,Q.prototype.Un,0);var d=a}else d=ck;d!==b&&b.ja(function(e,f,g){return c.cc(e)?(d.add(e,f,g),!0):!1});this.ft=d});Jh.prototype.Yb=ca(2,function(a){this.ps=a;a=this.getState();a!==Gh.INIT&&a!==Gh.LOADING&&Qh(this)});function jo(a){a=a.Sd(\"_#-;,:\",\"_#-;,:\",\"_#-;,:\");return new RegExp(\"^\"+a.replace(/[.*+?^${}()|[\\]\\\\\\/]/g,\"\\\\$&\").replace(/_#-;,:/g,\"\\\\d+\")+\"$\")}function ko(a,b){Qa.apply(null,arguments);return a}\nfunction lo(a,b){var c=x.console;c&&c.warn&&(a=$a(a)+\" is deprecated and will be removed soon. \",b&&(a+=b),c.warn(a))}var mo={};function no(a,b){C(a,oo,no,0);var c={};Object.assign(c,b);c.min=c.min||0;c.max=c.max||20;c.tileSize=c.tileSize||512;c.getURL=function(d,e,f){return a.Lf(d,e,f).clone().B({size:c.tileSize})};xk.call(this,c);this.aa=a}u(no,xk);t(\"H.service.rasterTile.Provider\",no);no.prototype.V=function(a,b){var c=this.aa;return c.V().query(c.zi.Nn+\".\"+c.L(),b,a)};\nno.prototype.getCopyrights=no.prototype.V;no.prototype.Si=function(){return wk()};no.prototype.qd=function(){return wk()?vk():no.g.qd.call(this)};var po=globalThis;function qo(){}qo.prototype.pop=function(a){this[a]||(this[a]=[]);return this[a].pop()||document.createElement(\"canvas\")};qo.prototype.push=function(a,b){this[b]||(this[b]=[]);this[b].push(a)};var ro=new qo;t(\"H.service.util.eval\",function(a){return eval(a)});function V(a,b,c,d,e,f){if(a&&b)this.Vr(a),this.Gk(b),this.Ag(c),this.Rr(e),this.Hw(f),this.Jk(d);else throw new D(V,B,'Parameters \"scheme\" and \"host\" must be specified');}t(\"H.service.Url\",V);\nfunction so(a,b){var c=x.document,d;var e=\"\";if(c){e=c.createElement(\"a\");if(b){var f=(d=c.getElementsByTagName(\"base\")[0])&&d.href;var g=c.head;var h=d||g.appendChild(c.createElement(\"base\"));h.href=b}e.href=a;e=e.href;b&&(d?d.href=f:g.removeChild(h))}else/[\\w]+:\\/\\//.test(a)&&(e=a);f=/(?:(\\w+):\\/\\/)?(?:([^:]+):([^@/]*)@)?([^/:]+)?(?:[:]{1}([0-9]+))?(\\/[^?#]*)?(\\?[^#]+)?(#.*)?/.exec(e);a=f[1];g=f[4];b=f[5];h=f[6];c=f[7];d=f[8];!f[2]&&g&&/@/.test(g)&&(g=g.split(\"@\")[1]);f=V;h=h&&0<h.length?h.substr(1):\n\"\";e={};var k,l;if(c)for(k=/([?&]?([^=&+]+))(=([^&]+))?/g;l=k.exec(c);)e[decodeURIComponent(l[2])]=l[4]?decodeURIComponent(l[4]):void 0;return new f(a,g,h,e,isNaN(+b)?void 0:+b,d&&0<d.length?d.substr(1):\"\")}V.parse=so;V.prototype.clone=function(){var a={},b;for(b in this.Ga)a[b]=this.Ga[b];return new V(this.li,this.Jj,this.df,a,this.jk,this.Cb)};V.prototype.clone=V.prototype.clone;\nV.prototype.Vr=function(a){if(!a||\"string\"!==typeof a)throw new D(this.Vr,0,'The \"scheme\" parameter must be a non-empty string.');this.li=a;return this};V.prototype.setScheme=V.prototype.Vr;V.prototype.rA=function(){return this.li};V.prototype.getScheme=V.prototype.rA;V.prototype.Gk=function(a){if(!a||\"string\"!==typeof a||\"-\"===a.charAt(0)||\".\"===a.charAt(0)||\".\"===a.charAt(a.length-1))throw new D(this.Gk,0,'The \"host\" parameter is not a valid host name.');this.Jj=a;return this};\nV.prototype.setHost=V.prototype.Gk;V.prototype.Kz=function(){return this.Jj};V.prototype.getHost=V.prototype.Kz;V.prototype.Ag=function(a){this.df=a||void 0;return this};V.prototype.setPath=V.prototype.Ag;V.prototype.dA=function(){return this.df};V.prototype.getPath=V.prototype.dA;V.prototype.Jk=function(a){if(a)if(\"object\"==typeof a)this.Ga=a;else throw new D(this.Jk,0,'Parameter \"params\" must be an object.');else this.Ga={};return this};V.prototype.setQuery=V.prototype.Jk;V.prototype.yu=function(){return!to(this)};\nV.prototype.hasQuery=V.prototype.yu;V.prototype.getQuery=function(){return this.Ga};V.prototype.getQuery=V.prototype.getQuery;V.prototype.Rr=function(a){if(void 0===a)this.jk=a;else{var b=$b(+a<<0,0,65535);if(b!=a)throw new D(this.Rr,0,'Parameter \"port\" must be an integer in range [0...65535]');this.jk=b}return this};V.prototype.setPort=V.prototype.Rr;V.prototype.iA=function(){return this.jk};V.prototype.getPort=V.prototype.iA;V.prototype.Hw=function(a){this.Cb=a||void 0;return this};\nV.prototype.setAnchor=V.prototype.Hw;V.prototype.tp=function(){return this.Cb};V.prototype.getAnchor=V.prototype.tp;V.prototype.B=function(a){if(\"object\"!==typeof a)throw new D(this.B,0,'Parameter \"other\" must be an object.');var b=this.Ga,c;for(c in a)a.hasOwnProperty(c)&&\"function\"!==typeof a[c]&&(b[c]=a[c]);return this};V.prototype.mergeQuery=V.prototype.B;\nV.prototype.Ha=function(a){if(!a||\"string\"!==typeof a)throw new D(this.Ha,0,'Parameter \"subDomain\" must be a non-empty string');\".\"===a.substr(a.length-1)&&(a=a.substr(0,a.length-1));return this.Gk(a+\".\"+this.Jj)};V.prototype.addSubDomain=V.prototype.Ha;V.prototype.A=function(a){if(!a||\"string\"!==typeof a)throw new D(this.A,0,'Parameter \"subPath\" must be a non-empty string');return this.Ag((this.df?this.df+\"/\":\"\")+a)};V.prototype.addSubPath=V.prototype.A;\nV.prototype.toString=function(){return[this.li+\"://\",this.Jj,this.jk?\":\"+this.jk:\"\",this.df||!to(this)||this.Cb?\"/\":\"\",this.df?encodeURI(this.df):\"\",uo(this),this.Cb?\"#\"+encodeURIComponent(this.Cb):\"\"].join(\"\")};V.prototype.toString=V.prototype.toString;function vo(a){return encodeURIComponent(a).replace(/[!'()*]/g,function(b){return\"%\"+b.charCodeAt(0).toString(16)})}\nfunction uo(a){var b=[],c=a.Ga,d={},e;for(e in c){if(c.hasOwnProperty(e)&&\"function\"!==typeof c[e]){var f=a.Ga[e];d.Jg=vo(e);C(f,wo)?f.co.forEach(function(g){return function(h){b.push(g.Jg+\"=\"+vo(h))}}(d)):C(f,xo)?b.push(d.Jg+\"=\"+f.co.map(function(g){return vo(g)}).join(f.Hy)):b.push(void 0===f?d.Jg:d.Jg+\"=\"+vo(f))}d={Jg:d.Jg}}return 0<b.length?\"?\"+b.join(\"&\"):\"\"}\nfunction yo(a){var b=Vi(\"H-service\",\"1.54.2\",\"46e6c43\",{region:\"row\"});a.Ga.xnlp=\"CL_JSMv3.\"+b.version;return a}function to(a){var b,c=0;for(b in a.Ga)if(a.Ga.hasOwnProperty(b)&&\"function\"!==typeof a.Ga[b]&&(c++,0<c))break;return!c}function zo(a,b){if(db(a))for(var c=0;c<a.length;c++){var d=a[c];if(!eb(d)&&!hb(d)){var e=\"The Array does not contain only strings and numbers\";break}}else e=\"Not an Array\";if(e)throw new D(b,0,a);return a}\nfunction wo(a){this.co=zo(a,wo)}V.MultiValueQueryParameter=wo;wo.prototype.CA=function(){return this.co};wo.prototype.getValues=wo.prototype.CA;function xo(a,b){this.co=zo(a,xo);if(!/^[!\\$\\(\\)\\*\\+,;]$/.test(b))throw new D(xo,1,'Invalid delimiter \"'+b+'\"');this.Hy=b}V.DelimitedQuerySubValues=xo;function W(a){a=ko({},this.Fy,a);var b=a.apikey||a.apiKey,c=a.baseUrl;if(c=b?c?0:\"baseUrl\":\"apikey\")throw new D(W,0,'\"'+c+'\" must be specified');this.Kw(a.baseUrl);this.Zs=b;this.hd.B({apikey:b});this.Lc=a.headers||{};this.MC=Oa(a.servicesConfig||{})}t(\"H.service.Platform\",W);W.prototype.Fy={apikey:null,baseUrl:new V(\"https\",\"hereapi\"+(Zm?\".cn\":\".com\"))};W.prototype.Kw=function(a){this.hd=yo(a.clone());this.Zs=a=this.Zs;this.hd.B({apikey:a})};W.prototype.setBaseUrl=W.prototype.Kw;\nW.prototype.Fc=function(){return this.hd};W.prototype.getBaseUrl=W.prototype.Fc;W.prototype.Ua=function(a,b){try{return a.Am=!0,new a(ko({platformBaseUrl:this.Fc(),headers:this.Lc},this.MC[a.CONFIG_KEY]||{},b||{}))}finally{a.Am=!1}};W.prototype.createService=W.prototype.Ua;\nW.prototype.Ql=function(a,b,c){var d=this;if(!H.map.render.harp)throw Error(\"HARP engine module not found\");if(!ya(a)&&!eb(a))throw new D(this.Ql,0,\"is invalid: must be either a configuration object or a URL\");if(!Wa(b))throw new D(this.Ql,1,\"is invalid: must be a Function\");if(!Wa(c))throw new D(this.Ql,2,\"is invalid: must be a Function\");var e=new H.map.render.harp.Style(a);e.addEventListener(\"change\",function(){var f=e.getState();if(-1===f)c(Error(\"H.service.platform#createHybridLayers method failed to load style configuration\"));\nelse if(2===f){f={dark:!0};var g=d.Mp({resource:\"background\",queryParams:{style:\"satellite.day\"}}),h=e.Pd(),k={styles:[{technique:\"raster\",attr:{gamma:1,brightness:1}}]};h.definitions&&(void 0!==h.definitions[\"Satellite.Texture.Gamma\"]&&(k.styles[0].attr.gamma=h.definitions[\"Satellite.Texture.Gamma\"]),void 0!==h.definitions[\"Satellite.Texture.Brightness\"]&&(k.styles[0].attr.brightness=h.definitions[\"Satellite.Texture.Brightness\"]));g=new no(g,{engineType:cn,style:new H.map.render.harp.Style(k)});\nb({raster:new zk(g,f),vector:d.wh().kd(e,{engineType:cn},f),traffic:d.Pp().kd(e,{engineType:cn},f)})}});e.load()};W.prototype.createHybridLayers=W.prototype.Ql;W.prototype.Pl=function(a,b,c,d,e,f){function g(ta,nb,zd){nb=ta.km(nb);nb=r?new Jh(nb):new H.map.render.harp.Style(nb);var sc={engineType:l};p&&p.politicalView&&(sc.politicalView=p.politicalView);c&&(sc.lg=c);d&&(sc.lg2=d);f&&(sc.pois=f);var bb;zd&&(bb={dark:zd});return ta.kd(nb,sc,bb)}function h(ta,nb,zd,sc,bb){return ta.Md(nb,zd,v,sc,w,1,bb,n)}var k=this,l=Sh,n={crossOrigin:\"anonymous\"};if(ya(a)){var p=a;\"crossOrigin\"in p&&(n.crossOrigin=p.crossOrigin);a=p.tileSize;b=p.ppi;c=p.lg;d=p.lg2;e=p.style;\nf=p.pois;void 0!==p.engineType&&(l=p.engineType,n.engineType=l)}var q=l===Th.HARP,r=l===Th.WEBGL,v=a||512,w={};if(0>[72,250,320,500].indexOf(+b)){if(b!==B)throw new D(this.Pl,1,b);}else w.ppi=+b;c&&(w.lg=c);d&&(w.lg2=d);e&&(w.style=e);f&&(w.pois=!!f);if(q&&!H.map.render.harp)throw new D(this.Pl,0,\"HARP engine is not supported, module not found\");a={};if(Zm)ko(a,{vector:{normal:{map:g(this.wh(),\"harp/oslo/normal.day.json\")}}});else{e=this.Gp();var y=this.Gp({type:\"aerial\"}),I=this.Op(),G=I.rt(w.lg?\n{lg:w.lg,i18n:!0,engineType:l}:{engineType:l});ko(a,{raster:{normal:{xbase:h(e,\"xbasetile\",\"normal.day\",\"png8\",!1),xbasenight:h(e,\"xbasetile\",\"normal.night\",\"png8\",!0),base:h(e,\"basetile\",\"normal.day\",\"png8\",!1),basenight:h(e,\"basetile\",\"normal.night\",\"png8\",!0),map:h(e,\"maptile\",\"normal.day\",\"png8\",!1),mapnight:h(e,\"maptile\",\"normal.night\",\"png8\",!0),trafficincidents:G,transit:h(e,\"maptile\",\"normal.day.transit\",\"png8\",!1),labels:h(e,\"labeltile\",\"normal.day\",\"png\",!1)},satellite:{xbase:h(y,\"xbasetile\",\n\"hybrid.day\",\"jpg\",!0),base:h(y,\"basetile\",\"hybrid.day\",\"jpg\",!0),map:h(y,\"maptile\",\"hybrid.day\",\"jpg\",!0),labels:h(y,\"labeltile\",\"hybrid.day\",\"png\",!0)},terrain:{xbase:h(y,\"xbasetile\",\"terrain.day\",\"jpg\",!1),base:h(y,\"basetile\",\"terrain.day\",\"jpg\",!1),map:h(y,\"maptile\",\"terrain.day\",\"jpg\",!1),labels:h(y,\"labeltile\",\"terrain.day\",\"png\",!1)}}});if(q||r){ko(a,{vector:{normal:{traffic:I.qt(void 0,l),trafficincidents:G}}});y=this.wh();e=this.Pp();I=this.wh({queryParams:{content:\"default,advanced_roads\"}});\nG=this.wh({queryParams:{content:\"default,hillshade,contours\"}});if(r)a.vector.normal.map=g(y,\"omv/miami/normal.day.yaml\"),a.vector.normal.truck=g(y,\"omv/miami/truck.day.yaml\");else if(q){a.vector.normal.map=g(y,\"harp/oslo/normal.day.json\");a.vector.normal.truck=g(y,\"harp/oslo/normal.day.json\");a.vector.normal.logistics=g(I,\"harp/oslo/logistics.day.json\");a.vector.normal.logisticsnight=g(I,\"harp/oslo/logistics.night.json\");G=g(G,\"harp/oslo/topo.day.json\");G.D.L().setEnabledFeatures([{feature:\"terrain\",\nmode:\"hillshading\"},{feature:\"building footprints\"},{feature:\"building extruded\"}]);a.vector.normal.topo=G;var S={ppi:72<b?400:100,size:256<v?512:256,features:\"pois:\"+(!0===f||eb(f)&&/[^0]/.test(f)?\"all\":\"disabled\")};c&&(S.lang=c);d&&(S.lang2=d);p&&p.politicalView&&(S.pview=p.politicalView);b={dark:!0};G=function(ta,nb,zd,sc,bb){var Le=ko({},S);/^explore\\./.test(zd)||delete Le.features;ta=k.Mp({format:nb,resource:ta,queryParams:ko({style:zd},Le)});bb=new no(ta,{engineType:l,style:bb});return new zk(bb,\nsc)};ko(a.raster.normal,{base:G(\"background\",\"png8\",\"explore.day\"),basenight:G(\"background\",\"png8\",\"explore.night\",b),map:G(\"base\",\"png8\",\"explore.day\"),mapnight:G(\"base\",\"png8\",\"explore.night\",b),labels:G(\"label\",\"png\",\"explore.day\")});ko(a.raster.satellite,{xbase:G(\"background\",\"jpeg\",\"satellite.day\",b),base:G(\"background\",\"jpeg\",\"explore.satellite.day\",b),map:G(\"base\",\"jpeg\",\"explore.satellite.day\",b),labels:G(\"label\",\"png\",\"explore.satellite.day\")});ko(a.vector.normal,{mapnight:g(y,\"harp/oslo/normal.night.json\",\n!0),lite:g(y,\"harp/oslo/lite.day.json\"),litenight:g(y,\"harp/oslo/lite.night.json\",!0),ism:g(y,\"harp/oslo/road.network.day.json\"),ismnight:g(y,\"harp/oslo/road.network.night.json\",!0),roadnetwork:g(y,\"harp/oslo/road.network.day.json\"),roadnetworknight:g(y,\"harp/oslo/road.network.night.json\",!0)});for(var Y={styles:[{technique:\"raster\",attr:{gamma:[\"interpolate\",[\"linear\"],[\"zoom\"],0,1,13,1.2,17,1.3],brightness:[\"interpolate\",[\"linear\"],[\"zoom\"],0,.7,13,.9,17,1]}}]},Ga=[],ha=0;6>ha;ha++){var mb=new H.map.render.harp.Style(JSON.parse(JSON.stringify(Y)));\nmb=G(\"background\",\"jpeg\",\"satellite.day\",b,mb);Ga.push(mb)}a.hybrid={day:{raster:Ga[0],vector:g(y,\"harp/oslo/hybrid.day.json\",!0),traffic:g(e,\"harp/oslo/hybrid.day.json\",!0)},night:{raster:Ga[1],vector:g(y,\"harp/oslo/hybrid.night.json\",!0),traffic:g(e,\"harp/oslo/hybrid.night.json\",!0)},liteday:{raster:Ga[2],vector:g(y,\"harp/oslo/lite.hybrid.day.json\",!0),traffic:g(e,\"harp/oslo/lite.hybrid.day.json\",!0)},litenight:{raster:Ga[3],vector:g(y,\"harp/oslo/lite.hybrid.night.json\",!0),traffic:g(e,\"harp/oslo/lite.hybrid.night.json\",\n!0)},logistics:{raster:Ga[4],vector:g(I,\"harp/oslo/logistics.hybrid.day.json\",!0),traffic:g(e,\"harp/oslo/logistics.hybrid.day.json\",!0)},logisticsnight:{raster:Ga[5],vector:g(I,\"harp/oslo/logistics.hybrid.night.json\",!0),traffic:g(e,\"harp/oslo/logistics.hybrid.night.json\",!0)}}}y={traffic:{}};y.traffic.map=g(e,r?\"traffic/vector.tile.yaml\":\"harp/oslo/normal.day.json\");q&&(y.traffic.logistics=g(e,\"harp/oslo/logistics.day.json\"),y.traffic.logisticsnight=g(e,\"harp/oslo/logistics.night.json\"),y.traffic.mapnight=\ng(e,\"harp/oslo/normal.night.json\"),y.traffic.lite=g(e,\"harp/oslo/lite.day.json\"),y.traffic.litenight=g(e,\"harp/oslo/lite.night.json\"));ko(a.vector,y)}}return a};W.prototype.createDefaultLayers=W.prototype.Pl;function Ao(a,b){b=void 0===b?{}:b;if(!a.Am)throw new vb(a);Ao.g.constructor.call(this);var c=Bo(this,b);if(!c.baseUrl&&!c.platformBaseUrl)throw new D(a,0,'either \"baseUrl\" or \"platformBaseUrl\" must be specified');this.uc=(c.baseUrl?c.baseUrl:c.platformBaseUrl).clone();a=c.baseUrl?b:c;a.host&&this.uc.Gk(a.host);a.subDomain&&this.uc.Ha(a.subDomain);a.path&&this.uc.Ag(a.path);yo(this.uc);this.Lc=c.headers||{}}u(Ao,F);t(\"H.service.Service\",Ao);function Bo(a,b){a=a.Da();return b?ko({},a,b):a}\nAo.prototype.Da=function(){return{}};Ao.prototype.j=function(){return this.uc};Ao.prototype.getUrl=Ao.prototype.j;Ao.prototype.s=function(a,b,c,d){d=new Oe(void 0===d?\"application/json\":d,a.toString(),Md,{headers:this.Lc});d.then(b,Co(this,a,c));return d};function Co(a,b,c){return function(d){return\"function\"!==typeof d.json?Promise.reject(c(Do(b,d))):d.json().then(function(e){return c(a.od(e))},function(){return c(Do(b,d))})}}Ao.prototype.od=function(a){return Error(a.message)};\nfunction Do(a,b){return Error((b.statusText?\"[\"+b.statusText+\"] \":\"\")+a+\" request failed\")};function Eo(a){Eo.g.constructor.call(this,Eo,a);this.pu=a.getToken}u(Eo,Ao);t(\"H.service.iml.Service\",Eo);Eo.prototype.Da=function(){return{host:\"interactive.data.api.platform.here.com\",path:\"interactive/v1/catalogs\"}};\nEo.prototype.od=function(a){function b(){for(var d=ea(c),e=d.next();!e.done;e=d.next()){e=e.value;var f=e.format;if(e.keys.every(function(g){return a[g]}))return f()}return JSON.stringify(a)}var c=[{keys:[\"code\",\"title\",\"cause\",\"action\"],format:function(){return a.code+\": \"+a.title+\"; cause: \"+a.cause+\"; action: \"+a.action}},{keys:[\"error\",\"error_description\"],format:function(){return a.error+\": \"+a.error_description}},{keys:[\"error\",\"errorMessage\"],format:function(){return a.error+\": \"+a.errorMessage}}];\nreturn Error(ya(a)?b():a)};Eo.prototype.zh=function(a,b,c,d,e){var f=this.zh;Fo(f,0,a,b);Go(f,2,c,d);a=this.j().clone().A(a+\"/layers/\"+b+\"/statistics\").B(e||{});return this.K(a,\"GET\",c,d)};Eo.prototype.getStatistics=Eo.prototype.zh;Eo.prototype.em=function(a,b,c,d,e,f,g,h,k){var l=k?\"\":\".mvtf\";a=this.j().clone().A(d+\"/layers/\"+e+\"/tile/web/\"+c+\"_\"+a+\"_\"+b+l).B(Object.assign({clip:!0},h));return this.K(a,\"GET\",k?f:function(n){return n.arrayBuffer().then(f)},g,void 0,k?\"application/json\":\"arraybuffer\")};\nEo.prototype.getFeaturesByTile=Eo.prototype.em;Eo.prototype.du=function(a,b,c,d,e,f){var g=this.du;Ho(g,a);Fo(g,1,b,c);Go(g,3,d,e);a=Io(this,a,b,c,f);return this.K(a,\"GET\",d,e)};Eo.prototype.getFeatureById=Eo.prototype.du;Eo.prototype.Pe=function(a,b,c,d,e,f){var g=this.Pe;Jo(g,a);Fo(g,1,b,c);Go(g,3,d,e);a=Ko(this,a,b,c,f);return this.K(a,\"GET\",d,e)};Eo.prototype.getFeaturesById=Eo.prototype.Pe;\nEo.prototype.rh=function(a,b,c,d,e){var f=this.rh;if(!ya(a)||!(a.bbox||a.north&&a.east&&a.south&&a.west))throw new D(f,0,'must be an object with either \"bbox\" or a full set of \"north\", \"east\", \"south\" and \"west\"');Fo(f,1,b,c);Go(f,3,d,e);a=this.j().clone().A(b+\"/layers/\"+c+\"/bbox\").B(a);return this.K(a,\"GET\",d,e)};Eo.prototype.getFeaturesByBoundingBox=Eo.prototype.rh;\nEo.prototype.fu=function(a,b,c,d,e){var f=this.fu;if(!(ya(a)&&a.radius&&(a.lat&&(a.lng||a.lon)||a.refCatalogHrn&&a.refLayerId&&a.refFeatureId)))throw new D(f,0,'must be an object with \"radius\" and a combination of either \"lat\"+\"lng\" or \"refCatalogHrn\"+\"refLayerId\"+\"refFeatureId\"');Fo(f,1,b,c);Go(f,3,d,e);a=this.j().clone().A(b+\"/layers/\"+c+\"/spatial\").B(a);return this.K(a,\"GET\",d,e)};Eo.prototype.getFeaturesByPointAndRadius=Eo.prototype.fu;\nEo.prototype.eu=function(a,b,c,d,e,f){var g=this.eu;if(!ya(a)||!a.radius)throw new D(g,0,'must be an object with \"radius\"');Lo(g,1,b);Fo(g,2,c,d);Go(g,4,e,f);a=this.j().clone().A(c+\"/layers/\"+d+\"/spatial\").B(a);return this.K(a,\"POST\",e,f,b)};Eo.prototype.getFeaturesByGeometryAndRadius=Eo.prototype.eu;Eo.prototype.Fw=function(a,b,c,d,e){var f=this.Fw;Fo(f,0,a,b);Go(f,2,c,d);a=this.j().clone().A(a+\"/layers/\"+b+\"/search\").B(e||{});return this.K(a,\"GET\",c,d)};Eo.prototype.searchFeatures=Eo.prototype.Fw;\nEo.prototype.Uu=function(a,b,c,d,e){var f=this.Uu;Fo(f,0,a,b);Go(f,2,c,d);a=this.j().clone().A(a+\"/layers/\"+b+\"/iterate\").B(e||{});return this.K(a,\"GET\",c,d)};Eo.prototype.iterateFeatures=Eo.prototype.Uu;Eo.prototype.hf=function(a,b,c,d,e,f){var g=this.hf;Lo(g,0,a);Fo(g,1,b,c);Go(g,3,d,e);b=Mo(this,b,c,f);return this.K(b,\"PUT\",d,e,a)};Eo.prototype.putFeatures=Eo.prototype.hf;\nEo.prototype.ff=function(a,b,c,d,e,f){var g=this.ff;Lo(g,0,a);Fo(g,1,b,c);Go(g,3,d,e);b=Mo(this,b,c,f);return this.K(b,\"POST\",d,e,a)};Eo.prototype.postFeatures=Eo.prototype.ff;Eo.prototype.Bf=function(a,b,c,d,e){var f=this.Bf;Jo(f,a);Fo(f,1,b,c);Go(f,3,d,e);a=Ko(this,a,b,c);return this.K(a,\"DELETE\",d,e)};Eo.prototype.deleteFeatures=Eo.prototype.Bf;Eo.prototype.pw=function(a,b,c,d,e,f,g){var h=this.pw;Ho(h,a);Lo(h,1,b);Fo(h,2,c,d);Go(h,4,e,f);a=Io(this,a,c,d,g);return this.K(a,\"PUT\",e,f,b)};\nEo.prototype.putFeature=Eo.prototype.pw;Eo.prototype.Wv=function(a,b,c,d,e,f,g){var h=this.Wv;Ho(h,a);Lo(h,1,b);Fo(h,2,c,d);Go(h,4,e,f);a=Io(this,a,c,d,g);return this.K(a,\"PATCH\",e,f,b)};Eo.prototype.patchFeature=Eo.prototype.Wv;Eo.prototype.yt=function(a,b,c,d,e){var f=this.yt;Ho(f,a);Fo(f,1,b,c);Go(f,3,d,e);a=Io(this,a,b,c);return this.K(a,\"DELETE\",d,e,void 0,\"text/plain\")};Eo.prototype.deleteFeature=Eo.prototype.yt;\nfunction Mo(a,b,c,d){return a.j().clone().A(b+\"/layers/\"+c+\"/features\").B(d||{})}function Ko(a,b,c,d,e){b=Object.assign({},e,{id:new wo(b)});return Mo(a,c,d,b)}function Io(a,b,c,d,e){return a.j().clone().A(c+\"/layers/\"+d+\"/features/\"+b).B(e||{})}\nEo.prototype.K=function(a,b,c,d,e,f){f=void 0===f?\"application/json\":f;b={method:b,headers:Object.assign({},e?{\"Content-Type\":\"application/geo+json\"}:void 0,\"function\"===typeof this.pu?{Authorization:\"Bearer \"+this.pu()}:void 0,this.Lc)};e&&(b.data=JSON.stringify(e));e=new Oe(f,a.toString(),Md,b);e.then(c,Co(this,a,d));return e};Eo.CONFIG_KEY=\"iml\";function Fo(a,b,c,d){ab(c,\"String\",a,b,\"must be a string\");ab(d,\"String\",a,b+1,\"must be a string\")}\nfunction Ho(a,b){ab(b,\"String\",a,0,\"must be a string\")}function Jo(a,b){if(!Array.isArray(b)||0===b.length||b.some(function(c){return\"string\"!==typeof c}))throw new D(a,0,\"must be a non-empty array of strings\");}function Lo(a,b,c){if(!ya(c))throw new D(a,b,\"must be a GeoJSON object\");}function Go(a,b,c,d){if(!Wa(c))throw new D(a,b,\"must be a function\");if(!Wa(d))throw new D(a,b+1,\"must be a function\");}W.prototype.Lz=function(a){return this.Ua(Eo,a)};W.prototype.getIMLService=W.prototype.Lz;function No(a,b,c,d){No.g.constructor.call(this,d?{min:d.min,max:d.max,engineType:d.engineType}:void 0);C(a,Eo,No,0);if(!eb(b))throw new D(No,1,'\"catalogHrn\" must be a string');if(!eb(c))throw new D(No,2,'\"layerId\" must be a string');this.aa=a;this.Wg=b;this.Ih=c;this.Ek=ya(d)&&ya(d.parameters)?d.parameters:{};this.Ya(this.Ap())}u(No,Q);t(\"H.service.iml.Provider\",No);No.prototype.s=function(a,b,c,d,e){return this.aa.em(a,b,c,this.Wg,this.Ih,d,e,this.Ek)};No.prototype.requestInternal=No.prototype.s;\nNo.prototype.Tc=he;No.prototype.providesOMV=No.prototype.Tc;No.prototype.L=function(){return this.nb()};No.prototype.getStyle=No.prototype.L;No.prototype.Bb=function(a){C(a,Jh)&&a.Yb(\"MVT\");this.Ya(a)};No.prototype.setStyle=No.prototype.Bb;\nNo.prototype.Ap=function(){return this.vb===Th.WEBGL?new Jh({sources:{iml:{type:\"MVT\"}},layers:{iml:{data:{source:\"iml\",layer:this.Wg+\":\"+this.Ih},points:{filter:{$geometry:\"point\"},draw:{points:{collide:!1,order:200,color:\"#92CF48\",size:[[10,\"8px\"],[14,\"12px\"],[18,\"16px\"]]}}},polygons:{filter:{$geometry:\"polygon\"},draw:{polygons:{order:201,color:\"#E39E3C\"},lines:{order:202,color:\"#755DA5\",width:\"1px\"}}},lines:{filter:{$geometry:\"line\"},draw:{lines:{order:203,color:\"#0258AE\",width:\"2px\",join:\"round\",\ncap:\"round\"}}}}}}):new H.map.render.harp.Style({styles:[{layer:this.Wg+\":\"+this.Ih,when:[\"==\",[\"geometry-type\"],\"Point\"],technique:\"circles\",renderOrder:200,color:\"#92CF48\",size:[\"interpolate\",[\"linear\"],[\"zoom\"],10,8,14,12,18,16]},{layer:this.Wg+\":\"+this.Ih,when:[\"==\",[\"geometry-type\"],\"Polygon\"],technique:\"fill\",color:\"#E39E3C\",renderOrder:201},{layer:this.Wg+\":\"+this.Ih,when:[\"==\",[\"geometry-type\"],\"Polygon\"],technique:\"solid-line\",color:\"#755DA5\",lineWidth:\"1px\",renderOrder:202},{layer:this.Wg+\n\":\"+this.Ih,when:[\"==\",[\"geometry-type\"],\"LineString\"],technique:\"solid-line\",color:\"#0258AE\",lineWidth:\"2px\",renderOrder:203}]})};function Oo(a){Oo.g.constructor.call(this,Oo,a);lo(Oo,\"Use HERE Routing API v8 instead.\")}u(Oo,Ao);t(\"H.service.RoutingService\",Oo);Oo.prototype.Da=function(){return{subDomain:\"route.ls\",path:\"routing/7.2\"}};Oo.prototype.od=function(a){return Error(a.details)};Oo.CONFIG_KEY=\"routing\";Oo.prototype.Tg=function(a,b,c){a=this.j().clone().A(\"calculateroute.json\").B(a);return this.s(a,b,c)};Oo.prototype.calculateRoute=Oo.prototype.Tg;\nOo.prototype.Ho=function(a,b,c){a=this.j().clone().Ha(\"isoline\").A(\"calculateisoline.json\").B(a);return this.s(a,b,c)};Oo.prototype.calculateIsoline=Oo.prototype.Ho;function Po(a){Po.g.constructor.call(this,Po,a)}u(Po,Ao);t(\"H.service.RoutingService8\",Po);Po.CONFIG_KEY=\"routing_v8\";Po.prototype.Da=function(){return{subDomain:\"router\",path:\"v8/routes\"}};Po.prototype.od=function(a){return Error(401===(a&&void 0===a.status?401:a.status)?a.error_description:a.title,{cause:a})};Po.prototype.Tg=function(a,b,c){a=this.j().clone().B(a);return this.s(a,b,c)};Po.prototype.calculateRoute=Po.prototype.Tg;\nPo.prototype.Ho=function(a,b,c){a=this.j().clone().Ha(\"isoline\").Ag(\"v8/isolines\").B(a);return this.s(a,b,c)};Po.prototype.calculateIsoline=Po.prototype.Ho;W.prototype.nu=function(a,b){b=Zm?8:+b||7;if(7===b)b=Oo;else if(8===b)b=Po;else throw new D(this.nu,1,\"allowed values are 7 and 8\");return this.Ua(b,a)};W.prototype.getRoutingService=W.prototype.nu;function Qo(a,b,c){c=c||{};var d=+c.min,e=+c.max;c.min=d?$b(d,1,17):1;c.max=e?$b(e,1,17):17;Qo.g.constructor.call(this,c);C(a,Ro,Qo,0);C(b,Fh,Qo,1);this.aa=a;b.Yb&&b.Yb(\"OMV\");this.Ya(b,!0);this.xl=jo(this)}u(Qo,Q);t(\"H.service.trafficVectorTile.Provider\",Qo);Qo.prototype.Tc=he;Qo.prototype.providesOMV=Qo.prototype.Tc;Qo.prototype.cc=function(a){return this.xl.test(a)};Qo.prototype.cacheFilter=Qo.prototype.cc;Qo.prototype.Sd=function(a,b,c){return this.aa.Lf(a,b,c).toString()};\nQo.prototype.getTileKey=Qo.prototype.Sd;Qo.prototype.Rb=function(){return this.qf};Qo.prototype.getCache=Qo.prototype.Rb;Qo.prototype.MAX_STORE_TIME=2592E6;Qo.prototype.Si=function(){return wk()};Qo.prototype.qd=function(){return wk()?vk():Qo.g.qd.call(this)};Qo.prototype.s=function(a,b,c,d,e){return this.aa.Oa(a,b,c,d,e)};Qo.prototype.requestInternal=Qo.prototype.s;Qo.prototype.Bb=function(a){a.Yb&&a.Yb(\"OMV\");this.Ya(a)};Qo.prototype.setStyle=Qo.prototype.Bb;Qo.prototype.L=function(){return Qo.g.nb.apply(this)};\nQo.prototype.getStyle=Qo.prototype.L;Qo.prototype.qf=new Vj(256);Qo.prototype.V=function(){return null};Qo.prototype.getCopyrights=Qo.prototype.V;function Ro(a){Ro.g.constructor.call(this,Ro,a);this.vq=(a||le).layer||\"traffic\";this.he=\"mc\";this.$y=\"omv\"}u(Ro,Ao);t(\"H.service.trafficVectorTile.Service\",Ro);Ro.prototype.Da=function(){return{subDomain:\"traffic.vector\",path:\"v2\"}};Ro.CONFIG_KEY=\"trafficVectorTile\";Ro.prototype.kd=function(a,b,c){b=b||{};var d={min:0,max:22};ya(c)&&ko(d,c);return new zk(new Qo(this,a,b),d)};Ro.prototype.createLayer=Ro.prototype.kd;\nRo.prototype.Oa=function(a,b,c,d,e){return this.s(this.Lf(a,b,c),function(f){return f.arrayBuffer().then(d,e)},e,\"arraybuffer\")};Ro.prototype.Lf=function(a,b,c){return this.j().clone().A(\"traffictiles/\"+this.vq+\"/\"+this.he+\"/\"+c+\"/\"+a+\"/\"+b+\"/\"+this.$y)};Ro.prototype.km=function(a){return mn()+\"/\"+a};Ro.prototype.Rz=function(){return this.vq};Ro.prototype.getLayerName=Ro.prototype.Rz;W.prototype.Pp=function(a){return this.Ua(Ro,a)};W.prototype.getTrafficVectorTileService=W.prototype.Pp;function So(a){So.g.constructor.call(this,So,a);this.Cw=Bo(this,a).reverseSubDomain;lo(So,\"Use HERE Geocoding and Search API v7 instead.\")}u(So,Ao);t(\"H.service.GeocodingService\",So);So.prototype.Da=function(){return{subDomain:\"geocoder.ls\",reverseSubDomain:\"reverse\",path:\"6.2\"}};So.CONFIG_KEY=\"geocoding\";So.prototype.od=function(a){return Error(a.Details||a.message||a.error)};So.prototype.sp=function(a,b,c){a=this.j().clone().A(\"geocode.json\").B(a);return this.s(a,b,c)};\nSo.prototype.geocode=So.prototype.sp;So.prototype.Ar=function(a,b,c){a=this.j().clone().A(\"reversegeocode.json\").B(a);this.Cw&&a.Ha(this.Cw);return this.s(a,b,c)};So.prototype.reverseGeocode=So.prototype.Ar;So.prototype.search=function(a,b,c){a=this.j().clone().A(\"search.json\").B(a);return this.s(a,b,c)};So.prototype.search=So.prototype.search;W.prototype.Gz=function(a){return this.Ua(So,a)};W.prototype.getGeocodingService=W.prototype.Gz;function To(){this.ms={}}function Uo(a,b){for(var c in b)b.hasOwnProperty(c)&&a.wo(c,b[c])}To.prototype.wo=function(a,b){a=this.ms[a]||(this.ms[a]=[]);var c,d=b.length;for(c=0;c<d;c++){var e=new mo.Ns(b[c]);a.push(e)}};To.prototype.query=function(a,b,c){a=this.ms[a];var d,e=a?a.length:0,f=[];for(d=0;d<e;d++)a[d].Pf(b,c)&&f.push(a[d]);return f};\nmo.Ns=function(a){var b,c=a.boxes;this.alt=a.alt;this.label=a.label;this.min=a.minLevel;this.max=a.maxLevel;this.Cn=[];if(c&&(b=c.length)){var d=c[0];var e=new M(d[0],d[1],d[2],d[3]);this.Cn.push(e);this.nn=new M(d[0],d[1],d[2],d[3]);for(a=1;a<b;a++)d=c[a],e=new M(d[0],d[1],d[2],d[3]),this.Cn.push(e),this.nn.wd(e,!1,this.nn)}};mo.Ns.prototype.Pf=function(a,b){if(a>=this.min&&a<=this.max)if((a=this.Cn.length)&&this.nn){if(this.nn.Pf(b))for(;a--;)if(this.Cn[a].Pf(b))return!0}else return!0;return!1};function oo(a){a=void 0===a?{}:a;oo.g.constructor.call(this,oo,a);this.zi={Nn:a.resource||\"base\",zn:a.projection||\"mc\",format:a.format||\"png8\"};this.Bn=a.queryParams||{}}u(oo,Ao);t(\"H.service.rasterTile.Service\",oo);m=oo.prototype;m.L=function(){return this.Bn.style||\"explore.day\"};m.Lf=function(a,b,c){return this.j().clone().A(this.zi.Nn+\"/\"+(this.zi.zn+\"/\")+(c+\"/\"+a+\"/\"+b+\"/\")+this.zi.format).B(this.Bn)};m.Da=function(){return{subDomain:\"maps\",path:\"v3\"}};\nm.V=function(){this.ec||this.Df();return this.ec};m.Df=function(){this.ec=new To;this.s(this.j().clone().A(\"copyright\"),A(this.el,this),je)};m.el=function(a){var b=a.copyrights;a=a.resources;var c={},d=this.zi.Nn+\".\"+this.L();c[d]=[];a[this.zi.Nn].styles[this.L()].forEach(function(e){b[e].forEach(function(f){var g=[];f.boundingBoxes.forEach(function(h){g.push([h.north,h.west,h.south,h.east])});c[d].push({boxes:g,label:f.label,alt:f.alt,minLevel:f.minLevel,maxLevel:f.maxLevel})})});Uo(this.ec,c)};\nm.Ej=function(a,b){return this.s(this.j().clone().A(\"info\"),a,b)};oo.prototype.getInfo=oo.prototype.Ej;oo.prototype.Gj=function(a,b){return this.s(this.j().clone().A(\"politicalViews\"),a,b)};oo.prototype.getPoliticalViews=oo.prototype.Gj;oo.prototype.Fz=function(a,b){return this.s(this.j().clone().A(\"features\"),a,b)};oo.prototype.getFeatures=oo.prototype.Fz;oo.prototype.Ep=function(a,b){return this.s(this.j().clone().A(\"languages\"),a,b)};oo.prototype.getLanguages=oo.prototype.Ep;oo.CONFIG_KEY=\"rasterTile\";\nW.prototype.Mp=function(a){return this.Ua(oo,a)};W.prototype.getRasterTileService=W.prototype.Mp;function Vo(a,b,c,d,e,f,g){var h=this;g=g||{};f=f?f:{};var k=a.j().clone().A(b+\"/\"+a.gb+\"/\"+c).B(f),l=a.Yc;this.aa=a;this.jx=k;xk.call(this,{tileSize:d,max:512===d?19:20,min:512===d?2:0,getURL:function(n,p,q){var r=h.jx.clone();l&&r.Ha(l[(q+p+n)%l.length]);r.A(q+\"/\"+n+\"/\"+p+\"/\"+d+\"/\"+e);return r.toString()},crossOrigin:g.crossOrigin,headers:g.headers,uri:k.toString().replace(/_/g,\"\")+d,engineType:g.engineType});this.kD=b;this.li=c;this.Ga=f;this.So=c.split(\".\")[0];this.xe=A(this.xe,this);this.getCopyrights=\nthis.V;this.Te=!1;a.addEventListener(\"versionupdate\",this.xe)}u(Vo,xk);Vo.prototype.MAX_STORE_TIME=2592E6;Vo.prototype.s=function(a,b,c,d,e,f){this.Te||(lo(Wo,\"Use HERE Vector Tile API or Raster Tile API v3 instead.\"),this.Te=!0);return Vo.g.s.call(this,a,b,c,d,e,f)};Vo.prototype.requestInternal=Vo.prototype.s;Vo.prototype.i=function(){xk.prototype.i.call(this);this.aa.removeEventListener(\"versionupdate\",this.xe)};Vo.prototype.V=function(a,b){return this.aa.V().query(this.So,b,a)};\nVo.prototype.getCopyrights=Vo.prototype.V;Vo.prototype.xe=function(){var a=this.aa;this.jx=a.j().clone().A(this.kD+\"/\"+a.gb+\"/\"+this.li).B(this.Ga);this.reload(!1)};Vo.prototype.Si=function(){return wk()};Vo.prototype.qd=function(){return wk()?vk():Vo.g.qd.call(this)};function Wo(a){Wo.g.constructor.call(this,Wo,a);a=Bo(this,a);this.Yc=a.shards;(this.Qa=a.ignoreTypes?null:a.type)&&this.j().Ha(this.Qa);this.gb=a.version;this.ec=new To;this.jr={};this.Ol=0;\"newest\"===this.gb&&this.mp()}u(Wo,Ao);t(\"H.service.MapTileService\",Wo);Wo.prototype.Da=function(){return{subDomain:\"maps.ls\",path:\"maptile/2.1\",type:\"base\",version:\"newest\",shards:[\"1\",\"2\",\"3\",\"4\"]}};Wo.CONFIG_KEY=\"maptile\";\nfunction Xo(a,b){for(var c={},d=a[b+\"s\"][b],e=d.length;e--;)c[d[e].id]=d[e];a[b+\"s\"]=c}Wo.prototype.qu=function(){return this.Qa};Wo.prototype.getType=Wo.prototype.qu;Wo.prototype.Rp=function(){return this.gb};Wo.prototype.getVersion=Wo.prototype.Rp;Wo.prototype.Xr=function(a){this.gb=a};Wo.prototype.V=function(){this.Ol||(this.gb&&\"newest\"!==this.gb||\"traffic\"===this.Qa)&&this.Df();return this.ec};Wo.prototype.getCopyrights=Wo.prototype.V;m=Wo.prototype;\nm.os=function(a){a=a.response;var b;Xo(a,\"map\");Xo(a,\"scheme\");Xo(a,\"tiletype\");Xo(a,\"format\");Xo(a,\"resolution\");Xo(a,\"language\");if(\"newest\"===this.gb&&\"traffic\"!==this.Qa)for(b in a.maps)a.maps[b].hash&&a.maps[b].newest&&(this.Xr(a.maps[b].hash),this.dispatchEvent(\"versionupdate\"));this.$p=a;this.dispatchEvent(\"infoupdate\")};m.el=function(a){Uo(this.ec,a);this.dispatchEvent(\"copyrightupdate\")};\nm.mp=function(){var a=this;var b=this.j().clone().A(\"info\").B({output:\"json\"});this.Yc&&b.Ha(this.Yc[0]);this.s(b,function(c){a.os(c)},function(c){throw c;})};m.Df=function(){var a=this;var b=this.j().clone().A(\"copyright\").A(a.gb).B({output:\"json\"});this.Yc&&b.Ha(this.Yc[0]);this.Ol=1;this.s(b,function(c){a.Ol=2;a.el(c)},function(c){a.Ol=-1;throw c;})};m.Ej=function(){return this.$p};Wo.prototype.getInfo=Wo.prototype.Ej;\nWo.prototype.jj=function(a,b,c,d,e,f){var g=this.j().clone().A(a+\"/\"+this.gb+\"/\"+b+\"/\"+c+\"/\"+d).B(e?e:{}).toString();var h=0,k,l=g.length;if(0!==l)for(k=0;k<l;k++){var n=g.charCodeAt(k);h=(h<<5)-h+n;h|=0}g=h;h=this.jr[g];h||(h=new Vo(this,a,b,c,d,e,ko({headers:this.Lc},f||{})),this.jr[g]=h);return h};Wo.prototype.createTileProvider=Wo.prototype.jj;Wo.prototype.Md=function(a,b,c,d,e,f,g,h){a=this.jj(a,b,c,d,e,h);return new zk(a,{opacity:f,dark:!!g})};Wo.prototype.createTileLayer=Wo.prototype.Md;\nW.prototype.Gp=function(a){return this.Ua(Wo,a)};W.prototype.getMapTileService=W.prototype.Gp;function Yo(a){Yo.g.constructor.call(this,Yo,a)}u(Yo,Ao);t(\"H.service.SearchService\",Yo);Yo.CONFIG_KEY=\"search\";Yo.prototype.Da=function(){return{subDomain:\"search\",path:\"v1\"}};Yo.prototype.od=function(a){a=[a.title,a.action,a.cause].filter(function(b){return b});return Error(a.join(\". \"))};Yo.prototype.sp=function(a,b,c){a=this.j().clone().Ha(\"geocode\").A(\"geocode\").B(a);return this.s(a,b,c)};Yo.prototype.geocode=Yo.prototype.sp;\nYo.prototype.Ar=function(a,b,c){a=this.j().clone().Ha(\"revgeocode\").A(\"revgeocode\").B(a);return this.s(a,b,c)};Yo.prototype.reverseGeocode=Yo.prototype.Ar;Yo.prototype.fy=function(a,b,c){a=this.j().clone().Ha(\"autosuggest\").A(\"autosuggest\").B(a);return this.s(a,b,c)};Yo.prototype.autosuggest=Yo.prototype.fy;Yo.prototype.Iy=function(a,b,c){a=this.j().clone().Ha(\"discover\").A(\"discover\").B(a);return this.s(a,b,c)};Yo.prototype.discover=Yo.prototype.Iy;\nYo.prototype.mB=function(a,b,c){a=this.j().clone().Ha(\"lookup\").A(\"lookup\").B(a);return this.s(a,b,c)};Yo.prototype.lookup=Yo.prototype.mB;Yo.prototype.jy=function(a,b,c){a=this.j().clone().Ha(\"browse\").A(\"browse\").B(a);return this.s(a,b,c)};Yo.prototype.browse=Yo.prototype.jy;W.prototype.sA=function(a){return this.Ua(Yo,a)};W.prototype.getSearchService=W.prototype.sA;function Zo(a){lo(Zo,\"Use HERE Geocoding and Search API v7 instead.\");Zo.g.constructor.call(this,Zo,a)}u(Zo,Ao);t(\"H.service.PlacesService\",Zo);Zo.prototype.Da=function(){return{subDomain:\"places.ls\",path:\"places/v1\"}};Zo.CONFIG_KEY=\"places\";Zo.EntryPoint={SEARCH:\"discover/search\",SUGGEST:\"suggest\",EXPLORE:\"discover/explore\",AROUND:\"discover/around\",HERE:\"discover/here\",CATEGORIES:\"categories/places\"};Zo.prototype.request=function(a,b,c,d){return this.K(a,b,c,d)};Zo.prototype.request=Zo.prototype.request;\nZo.prototype.K=function(a,b,c,d){a=this.j().clone().A(a).B(b||{});return this.s(a,c,d)};Zo.prototype.search=function(a,b,c){return this.K(\"discover/search\",a,b,c)};Zo.prototype.search=Zo.prototype.search;Zo.prototype.gD=function(a,b,c){return this.K(\"suggest\",a,b,c)};Zo.prototype.suggest=Zo.prototype.gD;Zo.prototype.Vy=function(a,b,c){return this.K(\"discover/explore\",a,b,c)};Zo.prototype.explore=Zo.prototype.Vy;Zo.prototype.dy=function(a,b,c){return this.K(\"discover/around\",a,b,c)};\nZo.prototype.around=Zo.prototype.dy;Zo.prototype.KA=function(a,b,c){return this.K(\"discover/here\",a,b,c)};Zo.prototype.here=Zo.prototype.KA;Zo.prototype.py=function(a,b,c){return this.K(\"categories/places\",a,b,c)};Zo.prototype.categories=Zo.prototype.py;Zo.prototype.Yy=function(a,b,c,d){a=so(a).B(this.j().getQuery()).B(d||{});return this.s(a,b,c)};Zo.prototype.follow=Zo.prototype.Yy;W.prototype.eA=function(a){return this.Ua(Zo,a)};W.prototype.getPlacesService=W.prototype.eA;function $o(a,b,c){var d=this,e=c||{},f=+e.min,g=+e.max;e.tileSize=e.tileSize||512;e.min=f?$b(f,1,17):1;e.min+=Tj(e.tileSize,1);e.max=g?$b(g,1,17):17;$o.g.constructor.call(this,e);C(a,ap,$o,0);C(b,Fh,$o,1);this.aa=a;b.Yb&&b.Yb(\"OMV\");this.Ya(b,!0);this.tn=!1;c&&(c.politicalView&&(this.un=c.politicalView),bp(this,c.lg,c.lg2),this.tn=!!c.pois);this.rw=function(){d.xl=jo(d);d.reload(!1)};a.addEventListener(\"versionupdate\",this.rw);this.xl=jo(this);$o.prototype.So=function(){var h=/^v2\\/vectortiles\\/(.+)\\/mc$/.exec(a.j().df);\nreturn h?h[1]:B+\"\"}()}u($o,Q);t(\"H.service.omv.Provider\",$o);$o.prototype.Tc=he;$o.prototype.providesOMV=$o.prototype.Tc;$o.prototype.cc=function(a){return this.xl.test(a)};$o.prototype.cacheFilter=$o.prototype.cc;$o.prototype.Sd=function(a,b,c){return this.aa.Lf(a,b,c).toString()};$o.prototype.getTileKey=$o.prototype.Sd;$o.prototype.Rb=function(){return this.GB};$o.prototype.getCache=$o.prototype.Rb;$o.prototype.hA=function(){return this.un};$o.prototype.getPoliticalView=$o.prototype.hA;\n$o.prototype.QC=function(a){var b=this.un;this.un=a;this.dispatchEvent(new ah(\"politicalviewchange\",this.un,b))};$o.prototype.setPoliticalView=$o.prototype.QC;$o.prototype.MAX_STORE_TIME=2592E6;$o.prototype.Si=function(){return wk()};$o.prototype.qd=function(){return wk()?vk():$o.g.qd.call(this)};$o.prototype.s=function(a,b,c,d,e){return this.aa.Oa(a,b,c,d,e)};$o.prototype.requestInternal=$o.prototype.s;$o.prototype.Bb=function(a){a.Yb&&a.Yb(\"OMV\");this.Ya(a)};$o.prototype.setStyle=$o.prototype.Bb;\n$o.prototype.L=function(){return $o.g.nb.apply(this)};$o.prototype.getStyle=$o.prototype.L;$o.prototype.nb=function(){var a=$o.g.nb.apply(this),b=a.getState()===Gh.READY,c=a.Pd();b&&c&&c.global&&(this.kq&&(this.gw&&(c.global.ux_language=this.gw),this.St&&(c.global.ux_language_fallback=this.St)),this.tn&&c.global.poi&&c.global.poi[\"default\"]&&(c.global.poi[\"default\"].visible=this.tn),this.kq||this.tn)&&(a=new Jh(c,a.Fc()));return a};$o.prototype.getStyleInternal=$o.prototype.nb;\nfunction bp(a,b,c){var d=eb(b),e=eb(c);d&&(a.gw=b);e&&(a.St=c);if(d||e)a.Rj=[],d=/^([a-zA-Z]{2})(-|$)/,(e=d.exec(b))&&(\"zh\"===e[1]?a.Rj.push(b):a.Rj.push(e[1])),(e=d.exec(c))&&(\"zh\"===e[1]?a.Rj.push(c):a.Rj.push(e[1])),a.kq=!0}$o.prototype.kq=!1;var cp=[\"en\"];$o.prototype.Ep=function(){return this.Rj||cp};$o.prototype.getLanguages=$o.prototype.Ep;$o.prototype.i=function(){$o.g.i.call(this);this.aa.removeEventListener(\"versionupdate\",this.rw)};$o.prototype.GB=new Vj(256);\n$o.prototype.V=function(a,b){return this.aa.V().query(this.So,b,a)};$o.prototype.getCopyrights=$o.prototype.V;function ap(a){ap.g.constructor.call(this,ap,a);var b=Bo(this,a).mapVersion;this.Bn=a.queryParams||{};this.Vj=Ya(b)?b:dp[this.j().toString()];Ya(this.Vj)||ep(this)}u(ap,Ao);t(\"H.service.omv.Service\",ap);ap.prototype.Da=function(){return{subDomain:\"vector\",path:\"v2/vectortiles/base/mc\"}};ap.CONFIG_KEY=\"omv\";var dp={};kb(dp);ap.prototype.Wz=function(){return this.Vj};ap.prototype.getMapVersion=ap.prototype.Wz;\nfunction ep(a){a.s(a.j().clone().A(\"../../info\"),function(b){b=b.mapVersion;var c=a.j().toString();a.Vj=b;b!==dp[c]&&(dp[c]=b,a.dispatchEvent(\"versionupdate\"))},function(){})}ap.prototype.kd=function(a,b,c){b=b||{};var d={min:0,max:22};ya(c)&&ko(d,c);Zm&&(b.min=d.min=4);return new zk(new $o(this,a,b),d)};ap.prototype.createLayer=ap.prototype.kd;ap.prototype.Oa=function(a,b,c,d,e){return this.s(this.Lf(a,b,c),function(f){return f.arrayBuffer().then(d,e)},e,\"arraybuffer\")};\nap.prototype.Lf=function(a,b,c){a=this.j().clone().A(c+\"/\"+a+\"/\"+b+\"/omv\");Ya(this.Vj)&&a.B({mv:this.Vj}).B(this.Bn);return a};ap.prototype.km=function(a){return mn()+\"/\"+a};ap.prototype.Gj=function(a,b){if(!Wa(a))throw new D(this.Gj,0,'\"onResult\" must be a function');if(!Wa(b))throw new D(this.Gj,1,'\"onError\" must be a function');return this.s(this.j().clone().Ag(\"v2/vectortiles/pviews\"),a,b)};ap.prototype.getPoliticalViews=ap.prototype.Gj;W.prototype.wh=function(a){return this.Ua(ap,a)};\nW.prototype.getOMVService=W.prototype.wh;ap.prototype.Df=function(){this.ec=new To;this.s(this.j().clone().A(\"../../copyrights\"),A(this.el,this),je)};ap.prototype.el=function(a){Uo(this.ec,a);this.dispatchEvent(\"copyrightupdate\")};ap.prototype.V=function(){this.ec||this.Df();return this.ec};ap.prototype.getCopyrights=ap.prototype.V;function fp(a){fp.g.constructor.call(this,fp,a)}u(fp,Ao);t(\"H.service.publicTransit.Service\",fp);fp.prototype.Da=function(){return{subDomain:\"transit.router\",path:\"v8\"}};fp.CONFIG_KEY=\"publicTransit\";fp.prototype.pA=function(a,b,c){a=this.j().clone().A(\"routes\").B(a);return this.s(a,b,c)};fp.prototype.getRoutes=fp.prototype.pA;fp.prototype.wz=function(a,b,c){a=this.j().clone().A(\"departures\").B(a);return this.s(a,b,c)};fp.prototype.getDepartures=fp.prototype.wz;\nfp.prototype.tA=function(a,b,c){a=this.j().clone().A(\"stations\").B(a);return this.s(a,b,c)};fp.prototype.getStations=fp.prototype.tA;fp.prototype.od=function(a){return Error(JSON.stringify(a))};W.prototype.lA=function(a){return this.Ua(fp,a)};W.prototype.getPublicTransitService=W.prototype.lA;function gp(a){this.js=!!a.toBypassToken;if(!this.js&&!a.token)throw new D(gp,0,'\"token\" must be specified');lo(gp,\"Use HERE IML service instead.\");gp.g.constructor.call(this,gp,a);this.px=a.token;this.ot={};this.Nl={}}u(gp,Ao);t(\"H.service.xyz.Service\",gp);gp.prototype.Da=function(){return{host:\"xyz.api.here.com\",path:\"hub/spaces\"}};gp.prototype.od=function(a){return Error(a.errorMessage||a.message)};\ngp.prototype.Jp=function(a,b,c){ab(a,\"String\",this.Jp,0,'\"projectId\" must be a string');hp(this.Jp,1,b,c);a=ip(this.j().clone().Ag(\"project-api/projects/\"+a));return this.s(a,b,c)};gp.prototype.getProject=gp.prototype.Jp;gp.prototype.ou=function(a,b,c){hp(this.ou,0,a,b);c=jp(this,this.j().clone().B(c||{}));return this.s(c,a,b)};gp.prototype.getSpaces=gp.prototype.ou;\ngp.prototype.jm=function(a,b,c){ab(a,\"String\",this.jm,0,'\"spaceId\" must be a string');hp(this.jm,1,b,c);a=jp(this,this.j().clone().A(a));return this.s(a,b,c)};gp.prototype.getSpace=gp.prototype.jm;gp.prototype.zh=function(a,b,c){ab(a,\"String\",this.zh,0,'\"spaceId\" must be a string');hp(this.zh,1,b,c);a=jp(this,this.j().clone().A(a+\"/statistics\"));return this.s(a,b,c)};gp.prototype.getStatistics=gp.prototype.zh;\ngp.prototype.em=function(a,b,c,d,e,f,g){a=jp(this,this.j().clone().A(d+\"/tile/web/\"+c+\"_\"+a+\"_\"+b+\".mvtf\").B(Object.assign({clip:!0},g)));return this.s(a,function(h){return h.arrayBuffer().then(e)},f,\"arraybuffer\")};gp.prototype.search=function(a,b,c,d){ab(a,\"String\",this.search,0,'\"spaceId\" must be a string');hp(this.search,1,b,c);a=jp(this,this.j().clone().A(a+\"/search\").B(d||{}));return this.s(a,b,c)};gp.prototype.search=gp.prototype.search;\ngp.prototype.Pe=function(a,b,c,d){ab(a,\"String\",this.Pe,0,'\"spaceId\" must be a string');if(!ya(b))throw new D(this.Pe,1,'\"params\" must be an object');hp(this.Pe,2,c,d);a=jp(this,this.j().clone().A(a+\"/features\").B(b));return this.s(a,c,d)};gp.prototype.getFeaturesById=gp.prototype.Pe;\ngp.prototype.rh=function(a,b,c,d){ab(a,\"String\",this.rh,0,'\"spaceId\" must be a string');if(!ya(b))throw new D(this.Pe,1,'\"params\" must be an object');hp(this.rh,2,c,d);a=jp(this,this.j().clone().A(a+\"/bbox\").B(b));return this.s(a,c,d)};gp.prototype.getFeaturesByBoundingBox=gp.prototype.rh;gp.prototype.V=function(a){var b=this.ot[a];if(b)return b;this.Nl[a]||this.Df(a);return null};\ngp.prototype.hf=function(a,b,c,d,e){ab(a,\"String\",this.hf,0,'\"spaceId\" must be a string');if(!ya(b))throw new D(this.hf,1,'\"geojsonObject\" must be an object');hp(this.hf,2,c,d);if(e&&!ya(e))throw new D(this.hf,4,'\"opt_params\" must be an object');return kp(this,a,c,d,\"PUT\",b,e)};gp.prototype.putFeatures=gp.prototype.hf;\ngp.prototype.ff=function(a,b,c,d,e){ab(a,\"String\",this.ff,0,'\"spaceId\" must be a string');if(!ya(b))throw new D(this.ff,1,'\"featureCollection\" must be an object');hp(this.ff,2,c,d);if(e&&!ya(e))throw new D(this.ff,4,'\"opt_params\" must be an object');return kp(this,a,c,d,\"POST\",b,e)};gp.prototype.postFeatures=gp.prototype.ff;\ngp.prototype.Bf=function(a,b,c,d){ab(a,\"String\",this.Bf,0,'\"spaceId\" must be a string');if(!ya(b))throw new D(this.Bf,1,'\"params\" must be an object');hp(this.Bf,2,c,d);return kp(this,a,c,d,\"DELETE\",B,b)};gp.prototype.deleteFeatures=gp.prototype.Bf;\nfunction kp(a,b,c,d,e,f,g){var h=Object.assign(a.js?{}:{authorization:\"Bearer \"+a.px},{\"Content-Type\":\"application/geo+json\"},a.Lc);e={method:e,headers:h};f&&(e.data=JSON.stringify(f));b=ip(a.j().clone().A(b+\"/features\").B(g||{}));f=new Oe(\"application/json\",b.toString(),Md,e);f.then(c,Co(a,b,d));return f}gp.prototype.Df=function(a){var b=this;this.Nl[a]=lp;this.jm(a,function(c){b.Nl[a]=mp;b.ot[a]=c.copyright;b.dispatchEvent(\"copyrightupdate\")},function(c){b.Nl[a]=np;throw c;})};\nfunction jp(a,b){return a.js?b:ip(b).B({access_token:a.px})}function ip(a){var b=Object.assign({},a.getQuery());delete b.apikey;return a.Jk(b)}gp.CONFIG_KEY=\"xyz\";var lp=1,mp=2,np=-1;function hp(a,b,c,d){if(!Wa(c))throw new D(a,b,'\"onResult\" must be a function');if(!Wa(d))throw new D(a,b+1,'\"onError\" must be a function');}W.prototype.FA=function(a){return this.Ua(gp,a)};W.prototype.getXYZService=W.prototype.FA;function op(a,b,c){var d;op.g.constructor.call(this,c?{min:c.min,max:c.max,engineType:c.engineType}:void 0);C(a,gp,op,0);if(!eb(b))throw new D(op,1,'\"spaceId\" must be a string');this.aa=a;this.Bg=b;this.Ek={};if(c&&([\"limit\",\"simplificationLevel\",\"tags\"].forEach(function(e){e in c&&(this.Ek[e]=c[e])},this),a=c.parameters))for(d in a)this.Ek[d]=a[d];this.Ya(this.Ap())}u(op,Q);t(\"H.service.xyz.Provider\",op);op.prototype.s=function(a,b,c,d,e){return this.aa.em(a,b,c,this.Bg,d,e,this.Ek)};\nop.prototype.requestInternal=op.prototype.s;op.prototype.V=function(){return this.aa.V(this.Bg)};op.prototype.getCopyrights=op.prototype.V;op.prototype.Tc=he;op.prototype.providesOMV=op.prototype.Tc;op.prototype.L=function(){return this.nb()};op.prototype.getStyle=op.prototype.L;op.prototype.Bb=function(a){C(a,Jh)&&a.Yb(\"MVT\");this.Ya(a)};op.prototype.setStyle=op.prototype.Bb;\nop.prototype.Ap=function(){return this.vb===Th.WEBGL?new Jh({sources:{xyz:{type:\"MVT\"}},layers:{xyz:{data:{source:\"xyz\",layer:this.Bg},points:{filter:{$geometry:\"point\"},draw:{points:{collide:!1,order:200,color:\"#92CF48\",size:[[10,\"8px\"],[14,\"12px\"],[18,\"16px\"]]}}},polygons:{filter:{$geometry:\"polygon\"},draw:{polygons:{order:201,color:\"#E39E3C\"},lines:{order:202,color:\"#755DA5\",width:\"1px\"}}},lines:{filter:{$geometry:\"line\"},draw:{lines:{order:203,color:\"#000000\",width:\"2px\",join:\"round\",cap:\"round\"}}}}}}):\nnew H.map.render.harp.Style({styles:[{layer:this.Bg,when:[\"==\",[\"geometry-type\"],\"Point\"],technique:\"circles\",renderOrder:200,color:\"#92CF48\",size:[\"interpolate\",[\"linear\"],[\"zoom\"],10,8,14,12,18,16]},{layer:this.Bg,when:[\"==\",[\"geometry-type\"],\"Polygon\"],technique:\"fill\",color:\"#E39E3C\",renderOrder:201},{layer:this.Bg,when:[\"==\",[\"geometry-type\"],\"Polygon\"],technique:\"solid-line\",color:\"#755DA5\",lineWidth:\"1px\",renderOrder:202},{layer:this.Bg,when:[\"==\",[\"geometry-type\"],\"LineString\"],technique:\"solid-line\",\ncolor:\"#000000\",lineWidth:\"2px\",renderOrder:203}]})};function pp(a){if(!a||!Wa(a.requestData))throw new D(pp,0,\"options.requestData\");pp.g.constructor.call(this,a);this.wC=a.requestData;this.mC=!!a.providesDomMarkers}u(pp,Q);t(\"H.map.provider.MarkerTileProvider\",pp);pp.prototype.s=function(a,b,c,d,e){var f=this;return this.wC(a,b,c,function(g){for(var h=[],k,l,n=g.length;n--;)l=g[n],l.iD=f.getTileKey(a,b,c),l.fa(f),k=l.kc(),(C(l,li)||1===k.getState())&&h.push(g[n]);d(h)},e)};pp.prototype.requestInternal=pp.prototype.s;\npp.prototype.Dh=function(a,b){b===gc.VISUAL&&(a=this.Rb().get(a.iD))&&(a.valid=!1,this.kb(a))};pp.prototype.invalidateObject=pp.prototype.Dh;pp.prototype.Rc=function(){return this.mC};pp.prototype.providesDomMarkers=pp.prototype.Rc;pp.prototype.Sc=he;pp.prototype.providesMarkers=pp.prototype.Sc;function qp(){this.sd={}}qp.prototype.kc=function(a,b){var c=a+b,d;if(d=this.sd[c])return d;a=rp.MARKER.replace(\"{{icon}}\",sp[a]||sp.OTHER);a=a.replace(\"{{color}}\",tp[b]||tp.BLOCKING);b={size:{w:26,h:33},anchor:{x:13,y:30},hitArea:new Ae(Be.POLYGON,up.MARKER)};return this.sd[c]=d=new af(a,b)};\nvar rp={MARKER:'<svg width=\"26\" height=\"33\" enable-background=\"new 0 0 26 33\" viewBox=\"0 0 26 33\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"m26 33h-26v-33h26z\" fill=\"#8c8c8c\" opacity=\"0\"/><path d=\"m17 29.566c0 1.116-1.791 2.022-4 2.022s-4-.906-4-2.022c0-1.118 1.791-2.026 4-2.026s4 .908 4 2.026\" fill=\"#878787\" opacity=\".6\"/><path d=\"m1.795 17.971c-1.562-1.555-1.574-3.828-.028-5.655l8.343-10.021c.769-.895 1.795-1.384 2.894-1.384 1.117 0 2.197.521 2.889 1.394l8.338 10.014c1.588 1.854 1.578 4.022-.029 5.65l-11.202 11.202z\" fill=\"{{color}}\"/>{{icon}}</svg>'},sp=\n{CONGESTION:'<path style=\"fill:#FFFFFF;\" d=\"M12.966,1.177c0.965,0,1.894,0.442,2.496,1.204l8.378,10.258c1.362,1.592,1.482,3.477,0,4.979L12.994,28.464L2.143,17.618c-1.381-1.375-1.38-3.348,0-4.979l8.314-10.258C11.174,1.547,12.085,1.177,12.966,1.177 M12.967,0.177L12.967,0.177c-1.247,0-2.408,0.551-3.269,1.552l-8.332,10.28c-1.711,2.022-1.688,4.567,0.07,6.317l10.85,10.845l0.707,0.707l0.707-0.707l10.847-10.846c1.784-1.807,1.803-4.292,0.053-6.337L16.237,1.748C15.462,0.769,14.236,0.177,12.967,0.177L12.967,0.177z M16.645,10.405l-2.025-2.22c-0.48-0.51-1.15-0.8-1.84-0.8H9.53c-0.69,0-1.36,0.29-1.84,0.8l-1.94,2.22c-0.39,0.63-0.59,1.35-0.59,2.09v1.64c0,0.69,0.56,1.25,1.25,1.25h1.44l0.255-0.539c0.204-0.431,0.456-0.837,0.753-1.21l0.962-1.211l0.83-0.9c0.32-0.35,0.72-0.63,1.15-0.82H8.23c-0.28,0-0.55-0.07-0.79-0.22l-0.28-0.17l1.27-1.45c0.28-0.31,0.68-0.48,1.1-0.48h3.25c0.42,0,0.82,0.17,1.1,0.48l1.354,1.54H16.645z M18.31,12.205c-0.35-0.37-0.81-0.63-1.3-0.74c-0.18-0.04-0.36-0.06-0.54-0.06h-3.24c-0.7,0-1.37,0.29-1.84,0.8l-1.13,1.22l-0.82,1c-0.38,0.63-0.59,1.35-0.59,2.09v1.64c0,0.69,0.56,1.25,1.25,1.25h1.75v-1h5.99v1h1.75c0.69,0,1.25-0.56,1.25-1.25v-1.64c0-0.74-0.2-1.46-0.59-2.09L18.31,12.205z M12.1,17.105h-1c-0.138,0-0.25-0.112-0.25-0.25v-1c0-0.138,0.112-0.25,0.25-0.25h1c0.138,0,0.25,0.112,0.25,0.25v1C12.35,16.993,12.238,17.105,12.1,17.105z M18.59,17.105h-1c-0.138,0-0.25-0.112-0.25-0.25v-1c0-0.138,0.112-0.25,0.25-0.25h1c0.138,0,0.25,0.112,0.25,0.25v1C18.84,16.993,18.728,17.105,18.59,17.105z M18.56,14.505c-0.24,0.15-0.51,0.22-0.79,0.22h-5.85c-0.28,0-0.55-0.07-0.78-0.22l-0.29-0.17l1.27-1.45c0.15-0.16,0.33-0.28,0.53-0.37c0.18-0.07,0.38-0.11,0.58-0.11h3.24c0.24,0,0.48,0.06,0.68,0.16c0.16,0.08,0.3,0.19,0.42,0.32l1.27,1.45L18.56,14.505z M8.42,13.03h-1c-0.138,0-0.25-0.112-0.25-0.25v-1c0-0.138,0.112-0.25,0.25-0.25h1c0.138,0,0.25,0.112,0.25,0.25v1C8.67,12.918,8.559,13.03,8.42,13.03z\"/>',\nROADWORKS:'<path d=\"m13.004 1.411c.964 0 1.894.441 2.496 1.204l8.346 10.023c1.363 1.592 1.482 3.477 0 4.979l-10.846 10.847-10.852-10.846c-1.381-1.375-1.379-3.348 0-4.979l8.346-10.023c.717-.835 1.628-1.205 2.51-1.205m0-1c-1.248 0-2.408.551-3.268 1.552l-8.356 10.035c-1.718 2.033-1.695 4.578.064 6.328l10.85 10.845.706.707.707-.707 10.846-10.846c1.784-1.808 1.803-4.293.053-6.337l-8.337-10.012c-.769-.973-1.996-1.565-3.265-1.565zm-.575 15.264c.018-.332-.13-.651-.394-.851l-2.945-2.235-.21.36c-.22.39-.41.78-.58 1.19l-.677 2.129-1.364 3.051h1.314l2.109-4.672 1.317 1.212.138 3.46h1.092zm6.16-1.327c-.401-.54-1.209-.539-1.609.001l-1.17 1.58-2.29-1.74-.139-4.054c-.011-.276-.134-.535-.342-.716l-.7-.61c-.185-.161-.422-.25-.667-.25h-1.885c-.335 0-.648.168-.833.447l-1.144 1.723 7.58 5.76-1.86 2.51c-.098.132-.004.32.161.32h6.648l1.142-1.077zm-8.79-2.989-.876-.665.841-1.018.965.043zm1.63 1.24.969-1.781.118 2.61zm2.76-5.79c-.64 0-1.16.52-1.16 1.16 0 .65.52 1.17 1.16 1.17s1.16-.52 1.16-1.17c0-.64-.52-1.16-1.16-1.16z\" fill=\"#fff\"/>',\nACCIDENT:'<path style=\"fill:#FFFFFF;\" d=\"M12.998,1.091c0.964,0,1.894,0.442,2.496,1.204l8.346,10.344c1.363,1.592,1.482,3.477,0,4.979L12.994,28.465L2.143,17.618c-1.381-1.375-1.379-3.348,0-4.979l8.346-10.344C11.205,1.462,12.115,1.091,12.998,1.091 M12.998,0.091L12.998,0.091c-1.248,0-2.408,0.551-3.269,1.552L1.364,12.011c-1.708,2.021-1.685,4.566,0.073,6.316l10.85,10.845l0.707,0.707l0.707-0.707l10.846-10.846c1.784-1.808,1.803-4.293,0.053-6.337l-8.327-10.32C15.494,0.684,14.268,0.091,12.998,0.091L12.998,0.091z M7.83,18.982l-3.309-1.855l0.945,1.855H7.83z M16.111,19h3.942l1.596-2L16.111,19z M10.512,20.064l1.021-1.021l1.632,0.076c0.329,0.018,0.651-0.022,0.963-0.123c0.626-0.206,1.122-0.76,1.288-1.44l0.264-1.089l2.066-0.93c0.373-0.17,0.673-0.42,0.861-0.731c0.275-0.449,0.405-0.97,0.369-1.498L18.9,11.676l1.021-1.021l-0.724-0.724l-0.427,0.427l-0.121-0.364c-0.201-0.603-0.54-1.151-0.989-1.6l-1.159-1.159c-0.5-0.5-1.31-0.5-1.809,0l-1.267,1.267l0.724,0.724l-5.066,5.066l-0.724-0.724l-1.267,1.267c-0.5,0.5-0.5,1.31,0,1.809l1.159,1.159c0.449,0.449,0.997,0.788,1.6,0.989l0.364,0.121l-0.427,0.427L10.512,20.064z M14.901,10.349l0.732-0.732c0.098-0.098,0.256-0.098,0.354,0l0.732,0.732c0.098,0.098,0.098,0.256,0,0.354l-0.732,0.732c-0.098,0.098-0.256,0.098-0.354,0l-0.732-0.732C14.803,10.604,14.803,10.446,14.901,10.349z M9.472,15.777l0.732-0.732c0.098-0.098,0.256-0.098,0.354,0l0.732,0.732c0.098,0.098,0.098,0.256,0,0.354l-0.732,0.732c-0.098,0.098-0.256,0.098-0.354,0L9.472,16.13C9.375,16.033,9.375,15.874,9.472,15.777z M11.391,17.615c0.069-0.271,0.206-0.518,0.405-0.717l4.961-4.961c0.195-0.195,0.445-0.337,0.717-0.405l0.344-0.083l0.137,1.925c0.022,0.318-0.058,0.63-0.221,0.901c-0.101,0.166-0.279,0.271-0.409,0.329L14.8,15.74l-0.38,1.574c-0.083,0.344-0.318,0.615-0.612,0.713c-0.188,0.058-0.38,0.083-0.579,0.072l-1.925-0.138L11.391,17.615z\"/>',\nOTHER:'<path style=\"fill:#FFFFFF;\" d=\"M13.004,1.411c0.964,0,1.894,0.441,2.496,1.204l8.346,10.023c1.363,1.592,1.482,3.477,0,4.979L13,28.465L2.148,17.618c-1.381-1.375-1.379-3.348,0-4.979l8.346-10.023C11.211,1.781,12.122,1.411,13.004,1.411 M13.004,0.411L13.004,0.411c-1.248,0-2.408,0.551-3.268,1.552L1.38,11.998c-1.718,2.033-1.694,4.579,0.064,6.328l10.85,10.845L13,29.878l0.707-0.707l10.846-10.846c1.784-1.808,1.803-4.293,0.053-6.337L16.269,1.976C15.5,1.003,14.273,0.411,13.004,0.411L13.004,0.411z M14.716,20.139c0,0.947-0.758,1.724-1.724,1.724c-0.947,0-1.704-0.777-1.704-1.724c0-0.928,0.757-1.704,1.704-1.704C13.958,18.435,14.716,19.211,14.716,20.139z M14.204,16.33H11.78l-0.537-8.533h3.5L14.204,16.33z\"/>'},\ntp={BLOCKING:\"#323232\",VERYHIGH:\"#d5232f\",HIGH:\"#ffa100\"},up={MARKER:[24.1,17.8,14.2,28.42,16.8,29.4,12.8,31.4,8.79,29.4,11.23,28.42,1.7,17.8,1.7,12.1,10,1.9,12.9,.498,15.8,1.9,24.1,12.1,24.1,17.8]};function vp(a,b,c){c=c?c:{};c.criticality||(c.criticality=\"major,critical\");C(a,wp,vp,0);pp.call(this,{max:20,min:8,requestData:A(this.AC,this),engineType:c.engineType});this.sd=new qp;this.aa=a;this.Ga=c;this.reload=A(this.reload,this);this.tr=setInterval(this.reload,b||18E4)}u(vp,pp);t(\"H.service.traffic.incidents.Provider\",vp);var xp={minor:\"HIGH\",\"low impact\":\"HIGH\",major:\"VERYHIGH\",critical:\"BLOCKING\"};\nvp.prototype.AC=function(a,b,c,d,e){var f=this,g=this.sd;return this.aa.requestIncidentsByTile(a,b,c,function(h){var k=[];h=h.TRAFFIC_ITEMS;var l;if(h)for(h=h.TRAFFIC_ITEM,l=h.length;l--;){var n=h[l];var p=n.TRAFFIC_ITEM_TYPE_DESC;switch(p){case \"ACCIDENT\":case \"CONGESTION\":var q=p;break;case \"CONSTRUCTION\":q=\"ROADWORKS\";break;default:q=\"OTHER\"}q=g.kc(q,xp[n.CRITICALITY.DESCRIPTION]);p=n.LOCATION.GEOLOC.ORIGIN;p=new qf({lat:p.LATITUDE,lng:p.LONGITUDE},{provider:f,icon:q});p.setData(n);k.push(p)}d(k)},\ne,this.Ga)};vp.prototype.u=function(){pp.prototype.u.call(this);clearInterval(this.tr)};vp.prototype.dispose=vp.prototype.u;var zp=\"A21 A22 F01 F02 F08 F04 F05 F07 F03 F06 A2F F13 A25 A2C F12 D1B F1B A27 E12 A3A A24 A3D A3F F1F F25 F2C E32 A33 F29 D26 D36 F26 D0F F0F F2B E0C D3A A45 D23 D11 F2E F19 F14 F39 A4A A4B A5C D38 F2A F1A D0A F1C A48 D25 D1D F32 A46 A3E D24 E1C E32 A5F D2E D22 D0A\".split(\" \");function Ap(a,b,c,d){Ap.g.constructor.call(this,{min:10,max:21,engineType:d});C(a,wp,Ap,0);this.aa=a;this.Ga=c||Bp;this.Ga.responseattributes=\"sh,fc\";this.tr=setInterval(A(this.reload,this),b||18E4);this.vb===Th.WEBGL?this.Ya(new Jh(a.km(\"traffic/flow.yaml\")),!0):this.Ya(new H.map.render.harp.Style({styles:[{when:[\"==\",[\"geometry-type\"],\"LineString\"],technique:\"solid-line\",renderOrder:10002,attr:{color:[\"case\",[\">=\",[\"get\",\"JF\"],10],\"black\",[\">=\",[\"get\",\"JF\"],8],\"red\",[\">=\",[\"get\",\"JF\"],4],\"yellow\",\n\"green\"],lineWidth:3,metricUnit:\"Pixel\"}}]}))}u(Ap,Q);t(\"H.service.traffic.flow.Provider\",Ap);Ap.prototype.lr=he;Ap.prototype.providesGeoJSON=Ap.prototype.lr;Ap.prototype.L=function(){return this.nb()};Ap.prototype.getStyle=Ap.prototype.L;Ap.prototype.Bb=function(a){a.Yb&&a.Yb(\"GeoJSONTileSource\");this.Ya(a)};Ap.prototype.setStyle=Ap.prototype.Bb;var Bp={locationreferences:\"tmc,shp\"};Ap.prototype.i=function(){Ap.g.i.call(this);clearInterval(this.tr)};\nAp.prototype.s=function(a,b,c,d,e){return this.aa.requestFlowByTile(a,b,c,function(f){f.type&&-1!==f.type.indexOf(\"Error\")?e(f.Details):d(f)},e,this.Ga)};Ap.prototype.requestInternal=Ap.prototype.s;\nAp.prototype.ld=function(a,b,c,d,e){var f,g,h,k,l={type:\"FeatureCollection\",features:[]},n;var p=d.RWS.length;for(f=0;f<p;f++){var q=d.RWS[f];var r=q.RW;var v=r.length;var w=-1!==zp.indexOf(q.EXTENDED_COUNTRY_CODE+q.EBU_COUNTRY_CODE);for(q=0;q<v;q++){var y=r[q].FIS;var I=y.length;for(y=0;y<I;y++){var G=r[q].FIS[y].FI;var S=G.length;for(g=0;g<S;g++){var Y=G[g];var Ga=[];var ha=Y.CF[0];var mb=!!ha.SSS;var ta={type:\"Feature\",properties:ha,geometry:{type:\"MultiLineString\",coordinates:Ga}};ta.properties.LHT=\nw;Y.SHP.length&&(ta.properties.FC=Y.SHP[0].FC);mb&&(n=[]);for(ha=0;ha<Y.SHP.length;ha++){var nb=Y.SHP[ha].value;var zd=nb.length;for(h=0;h<zd;h++){var sc=mb?n:void 0,bb=new ni(nb[h].trim()),Le=[],pd={};for(bb.vi();-1!==(k=bb.fb());)k===Cp?(pd.lat=+String.fromCharCode.apply(Ap,bb.ih()),bb.next(),bb.vi()):k===Dp?(pd.lng=+String.fromCharCode.apply(Ap,bb.ih()),Le.push([pd.lng,pd.lat]),sc&&sc.push(kf(pd)),pd=[],bb.next(),bb.vi()):bb.next();pd.lng=+String.fromCharCode.apply(Ap,bb.ih());Le.push([pd.lng,\npd.lat]);sc&&sc.push(kf(pd));k=Le;Ga.push(k)}}l.features.push(ta)}}}}return Ap.g.ld.call(this,a,b,c,l,e)};Ap.prototype.createTileInternal=Ap.prototype.ld;var Dp=32,Cp=44;function Ep(a){function b(n){d.contains(e)&&d.removeChild(e);l&&clearTimeout(l);delete Ep.wr[f];n&&a.Kt&&a.Kt.call(k,n)}if(!a.url||!a.Jo)throw Error('Parameter \"options\" must specify at least a URL and a callback.');if(\"function\"!==typeof a.Jo)throw Error(\"Parameters options.callback must be a function\");var c=a.OD||document;var d=c.getElementsByTagName(\"head\")[0];var e=c.createElement(\"script\");c=a.url instanceof V?a.url:so(a.url,a.MD);var f=Ep.HC++;var g=a.my||\"callback\";var h=a.Jo;var k={};var l=\nnull;k.id=f;k.cancel=function(){b(\"cancelled\")};0!==a.timeout&&(l=x.setTimeout(function(){b(\"timeout\")},a.timeout||3E4));Ep.wr[f]=function(n){b();h.call(k,n)};e.type=\"text/javascript\";e.src=c.toString()+(c.yu()?\"&\":\"?\")+g+\"=\"+(a.PD?\"H.service.jsonp.handleResponse(\"+f+\")\":encodeURI(\"H.service.jsonp.handleResponse(\"+f+\")\"));d.appendChild(e);return k}t(\"H.service.jsonp\",Ep);Ep.IA=function(a){return(a=Ep.wr[a])?a:function(){}};Ep.handleResponse=Ep.IA;Ep.HC=0;Ep.wr={};function wp(a){wp.g.constructor.call(this,wp,a);this.ny=Bo(this,a).callbackKey;this.Te=!1}u(wp,Ao);t(\"H.service.traffic.Service\",wp);wp.prototype.Da=function(){return{subDomain:\"traffic.ls\",path:\"traffic/6.1\",callbackKey:\"jsoncallback\"}};wp.CONFIG_KEY=\"traffic\";wp.prototype.qt=function(a,b){return new zk(new Ap(this,void 0,a,b),{max:22})};wp.prototype.createFlowLayer=wp.prototype.qt;wp.prototype.rt=function(a){return new gi(new vp(this,void 0,a))};wp.prototype.createIncidentsLayer=wp.prototype.rt;\nfunction Fp(a,b,c,d){a.Te||(lo(wp,\"Use HERE Traffic API v7 instead.\"),a.Te=!0);return Ep({url:b,Jo:c,Kt:function(e){d(Error(\"[\"+e+\"] \"+b+\" request failed\"))},my:a.ny})}wp.prototype.BC=function(a,b,c){a=this.j().clone().A(\"incidents.json\").B(a);return Fp(this,a,b,c)};wp.prototype.requestIncidents=wp.prototype.BC;wp.prototype.yC=function(a,b,c,d,e,f){a=this.j().clone().A([\"flow/json\",c,a,b].join(\"/\")).B(f||{});return Fp(this,a,d,e)};wp.prototype.requestFlowByTile=wp.prototype.yC;\nwp.prototype.DC=function(a,b,c,d,e,f){a=this.j().clone().A([\"incidents/json\",c,a,b].join(\"/\")).B(f||{});return Fp(this,a,d,e)};wp.prototype.requestIncidentsByTile=wp.prototype.DC;wp.prototype.km=function(a){return mn()+\"/\"+a};function Gp(a){Gp.g.constructor.call(this,Gp,a)}u(Gp,Ao);t(\"H.service.traffic.Service7\",Gp);Gp.prototype.Da=function(){return{subDomain:\"data.traffic\",path:\"v7\"}};Gp.CONFIG_KEY=\"traffic_v7\";Gp.prototype.zC=function(a,b,c,d){a=this.j().clone().A([\"incidents\",a].join(\"/\")).B(b||{});return this.s(a,c,d)};Gp.prototype.requestIncidentById=Gp.prototype.zC;Gp.prototype.xC=function(a,b,c){a=this.j().clone().A(\"flow\").B(a||{});return this.s(a,b,c)};Gp.prototype.requestFlowByArea=Gp.prototype.xC;\nGp.prototype.CC=function(a,b,c){a=this.j().clone().A(\"incidents\").B(a||{});return this.s(a,b,c)};Gp.prototype.requestIncidentsByArea=Gp.prototype.CC;W.prototype.Op=function(a,b){b=b||6;if(6===b)b=wp;else if(7===b)b=Gp;else throw new D(this.Op,1,\"allowed values are 6 and 7\");return this.Ua(b,a)};W.prototype.getTrafficService=W.prototype.Op;function Hp(a,b,c,d){if(!Wa(c))throw new D(a,b,\"has invalid type\");if(!Wa(d))throw new D(a,b+1,\"has invalid type\");};function Ip(a,b){var c={};this.gC=a;Qa(c,b||c);hl.call(this,c);this.Fn={};a=this.Hc(ue.SPATIAL);a.update(a.Jd+1,gc.ADD)}u(Ip,hl);t(\"H.service.remote.ObjectProvider\",Ip);Ip.prototype.u=function(){hl.prototype.u.call(this)};Ip.prototype.dispose=Ip.prototype.u;Ip.prototype.le=function(){return ke};Ip.prototype.requestMarkers=Ip.prototype.le;Ip.prototype.ke=function(){return ke};Ip.prototype.requestDomMarkers=Ip.prototype.ke;Ip.prototype.rg=function(){return ke};Ip.prototype.requestOverlays=Ip.prototype.rg;\nIp.prototype.Sc=he;Ip.prototype.providesMarkers=Ip.prototype.Sc;Ip.prototype.Rc=he;Ip.prototype.providesDomMarkers=Ip.prototype.Rc;Ip.prototype.ie=he;Ip.prototype.providesSpatials=Ip.prototype.ie;Ip.prototype.Jn=function(){return ke};Ip.prototype.requestSpatials=Ip.prototype.Jn;function Jp(a){return a.Td(!0)}Ip.prototype.Kn=function(a,b){a=Kp(this,a,Lp);b&&(a=a.filter(Jp));return a};Ip.prototype.requestSpatialsByTile=Ip.prototype.Kn;\nfunction Kp(a,b,c){var d=b.Gi&&b.Gi[c],e;!d&&(e=b.kl)&&(delete b.kl,(b.Gi=a=a.gC.parse(a,b,e))&&(d=a[c]));return d||ke}Ip.prototype.$=function(a){var b=a.xb();if(this.Fn[b])throw new vb(this.$,\"Remote object \"+b+\" already added\");return this.Fn[b]=a};Ip.prototype.Na=function(a){delete this.Fn[a.xb()]};var Lp=\"spatials\";function Mp(a){a=a||{};var b=a.tileCacheSize||1024,c=a.resultType,d=a.styleCallback;Ya(a.min)||(a.min=12);Mp.g.constructor.call(this,a);if(-1===Np.indexOf(c))throw new D(Mp,2,\"invalid resultType\");this.resultType=c;if(d&&!Wa(d))throw new D(Mp,2,\"invalid style callback\");this.wi=d;this.oa=a.pixelRatio||Wd();this.Dc=A(this.Dc,this);this.Un(new Vj(b,A(this.fe,this)));this.createTileInternal=4===c||8===c?A(this.xy,this):A(this.vy,this)}u(Mp,Q);t(\"H.service.extension.TileProvider\",Mp);\nMp.prototype.mq=!1;Mp.prototype.getCapabilities=function(){return Mp.g.getCapabilities.call(this)|yh.CROP_LINES_BY_TILE|yh.CROP_POLYGONS_BY_TILE};Mp.prototype.Oa=function(a,b,c,d){return this.mq?Mp.g.Oa.call(this,a,b,c,d):B};Mp.prototype.requestTile=Mp.prototype.Oa;Mp.prototype.Dc=function(a){this.dispatchEvent(new Qd(\"error\",eb(a)?a:a+\"\",this))};Mp.prototype.Sc=function(){return 1===this.resultType};Mp.prototype.providesMarkers=Mp.prototype.Sc;Mp.prototype.Rc=function(){return 2===this.resultType};\nMp.prototype.providesDomMarkers=Mp.prototype.Rc;Mp.prototype.ie=function(){return 4===this.resultType||8===this.resultType};Mp.prototype.providesSpatials=Mp.prototype.ie;function Op(a){var b=a.yd;b||(a.Vv||(a.Vv=a.lu(a.resultType,a.wi,a.Dc)),b=a.yd=new Ip(a.Vv),b.fa(a),b.addEventListener(a.l.Aa,A(a.de,a)),b.nw=!0);return b}\nMp.prototype.vy=function(a,b,c,d){var e=this.getTileKey(a,b,c);e=this.Rb().get(e);var f=2==this.resultType,g=[],h=Op(this);e?e.valid=!0:(a=e=new ak(a,b,c,z),delete a.Gi,a.kl=d);d=f?Kp(h,e,\"domMarkers\"):Kp(h,e,\"markers\");for(b=d.length;b--;)a=d[b],a.us=e,(f||1===a.kc().getState())&&g.push(a);e.data=g;return e};Mp.prototype.de=function(a){if(a=a.target.us)a.valid=!1};Mp.prototype.SC=function(a){this.yw=!!a};Mp.prototype.setTileCanvasRendering=Mp.prototype.SC;Mp.prototype.yw=!0;\nMp.prototype.xy=function(a,b,c,d){var e=Op(this),f=this.getTileKey(a,b,c),g=this.tileSize,h=this.Rb().get(f);h||(a=h=new Gk(f,a,b,c,g,this.oa,c,e),delete a.Gi,a.kl=d);this.yw?(d=ro.pop(g),h.N(d)||ro.push(d,g)):Mk(h);return h};Mp.prototype.fe=function(a,b){var c;if(4===this.resultType||8===this.resultType){a=b.cb();for(c=a.length;c--;)delete a[c].vk[b.key];if(a=b.Dn())ro.push(a,this.tileSize),b.En()}else for(a=b.data,c=a.length;c--;)delete a[c].us};Mp.prototype.i=function(){Mp.g.i.call(this);Op(this).u()};\nvar Pp={MARKER:1,DOM_MARKER:2,POLYLINE:4,POLYGON:8};Mp.ResultType=Pp;var Np=[1,2,4,8];function Qp(a){var b=Rp;if(!a||!eb(ce(a.layerId,a.layer))||!hb(a.level)||Ya(a.rowFilter)&&!Wa(a.rowFilter)||Ya(a.rowFilterContext)&&!ya(a.rowFilterContext))throw new D(b,1,Ya(\"invalid layer config\")?\"invalid layer config\":a);};function Sp(){}t(\"H.service.extension.dataView.ITable\",Sp);Sp.prototype.uh=function(){};Sp.prototype.getMeta=Sp.prototype.uh;Sp.prototype.yh=function(){};Sp.prototype.getRowCount=Sp.prototype.yh;Sp.prototype.Rd=function(){};Sp.prototype.getRow=Sp.prototype.Rd;Sp.prototype.bb=function(){};Sp.prototype.getColumnNames=Sp.prototype.bb;Sp.prototype.zj=function(){};Sp.prototype.getColumn=Sp.prototype.zj;Sp.prototype.va=function(){};Sp.prototype.getCell=Sp.prototype.va;Sp.prototype.concat=function(){};\nSp.prototype.concat=Sp.prototype.concat;function Tp(){}t(\"H.service.extension.dataView.IColumn\",Tp);Tp.prototype.va=function(){};Tp.prototype.getCell=Tp.prototype.va;function Up(a,b){this.$b=a;this.Fl=b}t(\"H.service.extension.dataView.ObjColumn\",Up);Up.prototype.va=function(a){return this.$b.va(a,this.Fl)};Up.prototype.getCell=Up.prototype.va;function Vp(){}t(\"H.service.extension.dataView.IRow\",Vp);Vp.prototype.bb=function(){};Vp.prototype.getColumnNames=Vp.prototype.bb;Vp.prototype.va=function(){};Vp.prototype.getCell=Vp.prototype.va;Vp.prototype.Kf=function(){};Vp.prototype.getTable=Vp.prototype.Kf;function Wp(a,b){this.$b=a;this.Ak=b}t(\"H.service.extension.dataView.ObjRow\",Wp);Wp.prototype.bb=function(){return this.$b.bb()};Wp.prototype.getColumnNames=Wp.prototype.bb;Wp.prototype.va=function(a){return this.$b.va(this.Ak,a)};Wp.prototype.getCell=Wp.prototype.va;Wp.prototype.Kf=function(){return this.$b};Wp.prototype.getTable=Wp.prototype.Kf;function Xp(a,b,c){var d;b=b||(a&&a.length?Object.keys(a[0]):B);this.Nb=a;if(b)for(this.$g=b,this.Oo=a=Ra(),d=b.length;d--;)a[b[d]]=!0;c!==B&&(this.Gq=c)}t(\"H.service.extension.dataView.ObjTable\",Xp);m=Xp.prototype;m.Gq=B;m.Nb=B;m.$g=B;m.Oo=B;m.uh=function(){return this.Gq};Xp.prototype.getMeta=Xp.prototype.uh;Xp.prototype.yh=function(){return this.Nb?this.Nb.length:0};Xp.prototype.getRowCount=Xp.prototype.yh;Xp.prototype.Rd=function(a){var b=this.Nb;return b&&b[a]?new Wp(this,a):B};\nXp.prototype.getRow=Xp.prototype.Rd;Xp.prototype.bb=function(){return this.$g||ke};Xp.prototype.getColumnNames=Xp.prototype.bb;Xp.prototype.zj=function(a){return this.Oo[a]?new Up(this,a):B};Xp.prototype.getColumn=Xp.prototype.zj;Xp.prototype.va=function(a,b){var c=this.Nb;return(a=c&&this.Oo[b]&&c[a])&&a[b]};Xp.prototype.getCell=Xp.prototype.va;\nXp.prototype.concat=function(){var a=arguments.length,b,c=this.$g,d=\"\"+this.$g,e=(this.Nb||[]).slice();for(b=0;b<a;b++){var f=arguments[b];if(!(f instanceof Xp))throw new D(this.concat,b);if(f.Nb){if(c&&\"\"+f.$g!==d)throw new D(this.concat,b,\"Incompatible columns!\");e=e.concat(f.Nb)}}return new Xp(e,this.$g,this.Gq)};Xp.prototype.concat=Xp.prototype.concat;function Yp(a,b,c,d){d=d||Zp;this.vk={};d.provider=a;this.invalidate=ie;Yp.g.constructor.call(this,b,d);delete this.invalidate;c&&(this.uD=c);this.ra(gc.ADD)}u(Yp,rg);t(\"H.service.remote.Spatial\",Yp);var Zp={};Yp.prototype.xb=function(){return this.uD||rg.prototype.xb.call(this)};Yp.prototype.getId=Yp.prototype.xb;Yp.prototype.On=je;Yp.prototype.retain=Yp.prototype.On;Yp.prototype.release=he;Yp.prototype.release=Yp.prototype.release;function $p(a,b){this.Zl=a;b&&(this.labels=b)}var aq=new $p(ke);\nYp.prototype.sh=function(a){return(this.vk[a.key]||aq).Zl};Yp.prototype.getGeometriesForTile=Yp.prototype.sh;Yp.prototype.Dp=function(a){return(this.vk[a.key]||aq).labels};Yp.prototype.getLabels=Yp.prototype.Dp;function bq(a,b,c){a.vk[b.key]=new $p(c,void 0)};function cq(a,b,c){var d=8===a;this.wi=b;this.Lt=c||je;(this.Fm=4===a||d)?this.Se=d:this.Qu=1===a;this.Zt=this.Fm?\"$HProjGeometry\":\"geometry\"}\ncq.prototype.parse=function(a,b,c){var d,e={},f=[],g,h;var k=0;for(g=c.length;k<g;k++){var l=c[k];var n=l.Rows;if(l=n.length){var p=Object.keys(n[0]).filter(function(v){return\"geometry\"!==v&&\"$HProjGeometry\"!==v});p=new Xp(n,p);for(h=0;h<l;h++){var q=n[h];if(d=q[this.Zt]){if(delete q[this.Zt],q=p.Rd(h))try{var r=this.Fm?dq(this,a,b,q,d):eq(this,a,q,d.path);r.fa(a);f.push(r)}catch(v){this.Lt(v.message)}}else this.Lt(\"Layer must contain geometries\")}}}e[this.Fm?\"spatials\":this.Qu?\"markers\":\"domMarkers\"]=\nf;return e};function dq(a,b,c,d,e){var f=[],g=e.paths,h=g.length,k=0,l=a.wi&&a.wi(d);for(a=new Yp(b,a.Se,B,{style:l||a.Gy,data:d});k!==h;){b=f;d=b.push;l=g[k++];for(var n=0,p=l.length,q=[];n<p;)q.push(new L(l[n++],l[n++]));d.call(b,q)}bq(a,c,[new dg(f,e.interiorsIndex,e.outlinesIndex)]);return a}function eq(a,b,c,d){d=new hf(d[0],d[1]);var e=a.wi&&a.wi(c);a.Qu?(a={icon:e,data:c,provider:b},a=new qf(d,a)):(a={icon:e,data:c,provider:b},a=new li(d,a));return a};function Rp(a,b,c){var d=this,e=b&&b.rowFilter,f=c.resultType;Rp.g.constructor.call(this,c);C(a,fq,Rp,0);Qp(b);e?(c=Oa(b),c.rowFilter=e.toString()):c=Oa(b);delete c.layer;c.layerId=ce(b.layerId,b.layer);(new Pi).registerProcessor(\"pde\",\"H.service.extension.worker.processor\");a=a.j().clone().A(gq+\".\"+hq).B({meta:1});(new Ri(\"pde\",{message:[this.uid,0,{tileSize:this.tileSize,projected:!0,onlyOutline:4===f,serverUrl:a.toString(),layerConfigs:[c],horizontalMargin:1}]})).then(function(){d.mq=!0;d.kb()},\nthis.Dc)}u(Rp,Mp);t(\"H.service.extension.platformData.TileProvider\",Rp);Rp.prototype.lu=function(a,b,c){a=new cq(a,b,c);a.Gy=iq;return a};var iq=new gg({strokeColor:\"transparent\",fillColor:\"transparent\",lineWidth:0,lineJoin:\"round\",lineCap:\"round\"});\nRp.prototype.s=function(a,b,c,d,e){var f=this,g=this.getTileKey(a,b,c),h;g=this.Rb().get(g);var k={cancel:je},l=!0,n=this.resultType;g&&(4===n||8===n?g.Eh()||(d(ro.pop(this.tileSize),null),l=!1):(d(z),l=!1));if(l){var p=po.setTimeout(function(){h=new Ri(\"pde\",{message:[f.uid,1,[a,b,c]]});h.then(d,e)},500);k.cancel=function(){h?h.cancel():po.clearTimeout(p)}}return k};Rp.prototype.requestInternal=Rp.prototype.s;Rp.prototype.i=function(){Rp.g.i.call(this);new Ri(\"pde\",{message:[this.uid,3]})};\nRp.ResultType=Pp;function jq(a){this.oy=a}jq.prototype.cancel=function(){for(var a=this.oy,b=a.length;b--;)a[b].cancel();a.length=0};jq.prototype.cancel=jq.prototype.cancel;function kq(a,b,c,d,e,f){Hp(kq,1,b,c);Hp(kq,2,d,e);(this.Pn=a.length)?(this.Nb=a,this.gn=b,this.Ym=c,this.bk=0,this.rn=A(this.rn,this),this.yy=d,this.wy=e,this.Vh=Ra(),Qa(this.Vh,lq,f||{}),this.es={},x.setTimeout(this.rn,0)):b(ke,!0)}var lq={duration:100,fz:\"geometry\",ez:\"WKT\",LC:\"searchAttributes\",vt:B};\nkq.prototype.rn=function(){var a=[];var b=!1;for(var c=Ck(),d;this.bk<this.Pn;){var e=this.Nb[this.bk];b=e.attributes;d=e.layerId||this.Vh.vt;e.distance&&(b[this.Vh.LC]={nearest:new hf(e.nearestLat,e.nearestLon),distance:e.distance});if(e=e[this.Vh.fz]){try{var f=qi(new ni(e))}catch(g){this.Ym(new x.Error(g.message));b=!0;break}b[this.Vh.ez]=f}(e=this.es[d])||(e=this.es[d]=this.yy({layerId:d,columnNames:Object.keys(b)}));b=this.wy(e,b);a.push(b);this.bk++;if((b=this.bk===this.Pn)||Ck()-c>=this.Vh.duration){this.gn(a,\nb);break}}b?this.es={}:this.$k=x.setTimeout(this.rn,0)};kq.prototype.cancel=function(){x.clearTimeout(this.$k);this.bk<this.Pn&&this.Ym(new x.Error(\"parsing canceled\"))};kq.prototype.cancel=kq.prototype.cancel;function fq(a){fq.g.constructor.call(this,fq,a);lo(fq)}u(fq,Ao);t(\"H.service.extension.platformData.Service\",fq);fq.prototype.Da=function(){return{subDomain:\"s.fleet.ls\",path:\"1\"}};fq.CONFIG_KEY=\"platformData\";fq.prototype.request=function(a,b,c,d,e){return this.K(a,b,c,d,e)};fq.prototype.request=fq.prototype.request;\nfq.prototype.K=function(a,b,c,d,e){var f=\"text/plain\";if(!a)throw new D(this.request,0,a);if(!b)throw new D(this.request,1,b);if(!d)throw new D(this.request,3,d);if(!e)throw new D(this.request,4,e);a=this.j().clone().A(a+\".\"+b).B(c);b===mq.JSON&&(f=\"application/json\");return this.s(a,d,e,f)};var gq=\"tiles\";\nfq.EntryPoint={DOC_ATTRIBUTES:\"doc/attributes\",DOC_LAYER:\"doc/layer\",DOC_LAYERS:\"doc/layers\",DOC_MAPS:\"doc/maps\",DOC_INDEXES:\"doc/indexes\",SEARCH_BBOX:\"search/bbox\",SEARCH_CORRIDOR:\"search/corridor\",SEARCH_PROXIMITY:\"search/proximity\",SEARCH_QUADKEY:\"search/quadkey\",SERVICE_CONFIGURATION:\"serviceconfiguration\",STATIC:\"static\",TILE:\"tile\",TILES:gq,FILE:\"file\",INDEX:\"index\"};var hq=\"json\",mq={TXT:\"txt\",JSON:hq,HTML:\"html\",BIN:\"bin\"};fq.EntryPointType=mq;\nfq.prototype.Md=function(a,b){var c=b&&b.resultType;a=new Rp(this,a,b);return 1==c||2===c?new gi(a):new zk(a)};fq.prototype.createTileLayer=fq.prototype.Md;fq.prototype.wg=function(a,b,c,d){var e=[],f,g=b.layer_id||b.layer_ids;a=this.request(a,hq,b,function(h){f=new kq(h.geometries,c,d,function(k){return new Xp([],k.columnNames,k)},function(k,l){var n=k.Rd;k.Nb?k.Nb.push(l):k.Nb=[l];return n.call(k,k.Nb.length-1)},{vt:g});e.push(f)},function(h){d(new x.Error(h))});e.push(a);return new jq(e)};\nfunction nq(a,b,c){if(!db(a))throw new D(c,0,\"has invalid type\");if(!db(b))throw new D(c,1,\"has invalid type\");if(a.length!==b.length||!a.length)throw new D(c,1,\"specify one key attribute for each given layer id in the same order\");}\nfq.prototype.ne=function(a,b,c,d,e,f){function g(l,n){n&&h--;d(l,!h)}var h,k=[];nq(a,b,this.ne);Hp(this.ne,3,d,e);C(c,M,this.ne,2);c={bbox:c.ga+\",\"+c.X+\";\"+c.ha+\",\"+c.da};f&&Qa(c,f);a=c.layer_id?[c.layer_id]:a;f=0;for(h=a.length;f<h;f++)c.layer_id=a[f],c.key_attribute=b[f],k.push(this.wg(\"search/bbox\",c,g,e));return new jq(k)};fq.prototype.searchByBoundingBox=fq.prototype.ne;\nfq.prototype.Vc=function(a,b,c,d,e,f,g){nq(a,b,this.Vc);C(c,hf,this.Vc,2,\"has invalid type\");if(!hb(d))throw new D(this.Vc,3,\"has invalid type\");Hp(this.Vc,4,e,f);a={layer_ids:a.join(\",\"),key_attributes:b.join(\",\"),proximity:c.lat+\",\"+c.lng+\",\"+d};g&&Qa(a,g);return this.wg(\"search/proximity\",a,e,f)};fq.prototype.searchByProximity=fq.prototype.Vc;\nfq.prototype.Uc=function(a,b,c,d,e,f,g){var h=\"\";nq(a,b,this.Uc);if(!eb(c)&&!C(c,N))throw new D(this.Uc,1,\"has invalid type\");if(!hb(d))throw new D(this.Uc,2,\"has invalid type\");Hp(this.Uc,4,e,f);a={layer_ids:a.join(\",\"),key_attributes:b.join(\",\"),radius:d};if(eb(c))a.route_id=c;else{d=c.T;c=0;for(b=d.length;c<b;c+=3)h+=d[c]+\",\"+d[c+1],c<b-3&&(h+=\";\");a.corridor=h}g&&Qa(a,g);return this.wg(\"search/corridor\",a,e,f)};fq.prototype.searchByCorridor=fq.prototype.Uc;\nW.prototype.fA=function(a){return this.Ua(fq,a)};W.prototype.getPlatformDataService=W.prototype.fA;t(\"H.service.extension.customLocation.Permission\",{READ:\"read\",WRITE:\"write\",EXPORT:\"export\"});t(\"H.service.extension.customLocation.Storage\",{READONLY:\"readonly\",UPDATABLE:\"updatable\"});function oq(){if(pq)throw new vb(oq);}t(\"H.service.extension.customLocation.Table\",oq);var pq=!0;function qq(a,b){var c;pq=!1;var d=new oq;pq=!0;d.Rm=Ua(x.JSON.parse(x.JSON.stringify(a)));a=a.columnNames;var e=Ra();for(c=a.length;c--;)e[a[c]]=c;d.No=e;d.Cc=a.length;if(b){if(b.length%a.length)throw new D(qq,1,\"Invalid number of cells\");}else b=[];d.ub=b;return d}oq.prototype.uh=function(){return this.Rm};oq.prototype.getMeta=oq.prototype.uh;oq.prototype.yh=function(){return this.ub.length/this.Cc};\noq.prototype.getRowCount=oq.prototype.yh;oq.prototype.Rd=function(a){return a<this.ub.length/this.Cc?new rq(this,a):B};oq.prototype.getRow=oq.prototype.Rd;oq.prototype.qA=function(){var a=this.ub.length/this.Cc,b,c=new x.Array(a);for(b=0;b<a;b++)c[b]=new rq(this,b);return c};oq.prototype.getRows=oq.prototype.qA;oq.prototype.uo=function(a){var b=this.Cc,c=this.ub,d=c.length/this.Cc;if(!a||a.length%b)throw new D(this.uo,0,\"Invalid number of cells\");this.ub=c.concat(a);return d};\noq.prototype.addCells=oq.prototype.uo;oq.prototype.$x=function(){for(var a=this.Cc,b=this.ub,c=this.ub.length/this.Cc;a--;)b.push(z);return this.Rd(c)};oq.prototype.addRow=oq.prototype.$x;oq.prototype.bb=function(){return this.Rm.columnNames};oq.prototype.getColumnNames=oq.prototype.bb;oq.prototype.zj=function(a){return this.No[a]===B?B:new sq(this,a)};oq.prototype.getColumn=oq.prototype.zj;oq.prototype.va=function(a,b){return this.ub[a*this.Cc+this.No[b]]};oq.prototype.getCell=oq.prototype.va;\noq.prototype.pe=function(a,b,c){b=this.No[b];if(a>=this.ub.length/this.Cc)throw new D(this.pe,0,\"Row index out of bounds\");if(b===B)throw new D(this.pe,0,\"Column unknown\");this.ub[a*this.Cc+b]=c};oq.prototype.setCell=oq.prototype.pe;\noq.prototype.concat=function(a){var b=arguments.length,c,d=\"\"+this.bb(),e=this.ub?this.ub.slice():[];for(c=0;c<b;c++){var f=arguments[c];if(!(f instanceof oq))throw new D(this.concat,c);if(\"\"+f.bb()!==d)throw new D(this.concat,c,\"Incompatible columns!\");f.ub&&(e=e.concat(f.ub))}return qq(this.Rm,e)};oq.prototype.concat=oq.prototype.concat;var tq=/(\\n|\\t|\\r|\")/;\noq.prototype.ks=function(a,b){var c,d=this.Cc,e=this.bb(),f=[],g=[],h=this.ub,k=-1;for(c=0;c<d;c++)if(!a||a.test(e[c]))\"WKT\"===e[c]&&(k=f.length),f.push(c);if(!(a=f.length))throw new D(this.ks,1,\"No columns filtered\");uq(this,g,e,0,d,f,a,k);if(b){var l=b.length;for(c=0;c<l;c++)g.push(\"\\n\"),e=b[c],uq(this,g,h,e,d,f,a,k)}else for(l=this.yh(),e=0;e<l;e++)g.push(\"\\n\"),uq(this,g,h,e,d,f,a,k);return g.join(\"\")};\nfunction uq(a,b,c,d,e,f,g,h){var k;for(k=0;k<g;k++){k&&b.push(\"\\t\");var l=c[d*e+f[k]];if(k!==h){if(l!==z){l=String(l);if(tq.test(l))throw new D(a.ks,0,'Invalid character (\\\\n, \\\\r, \\\\t, or \") in row '+d+\" column \"+a.Rm.columnNames[f[k]]);b.push(l)}}else b.push(l)}}function sq(a,b){this.$b=a;this.Fl=b}oq.Column=sq;sq.prototype.va=function(a){return this.$b.va(a,this.Fl)};sq.prototype.getCell=sq.prototype.va;sq.prototype.pe=function(a,b){this.$b.pe(a,this.Fl,b)};sq.prototype.setCell=sq.prototype.pe;\nfunction rq(a,b){this.$b=a;this.Ak=b}oq.Row=rq;rq.prototype.bb=function(){return this.$b.bb()};rq.prototype.getColumnNames=rq.prototype.bb;rq.prototype.va=function(a){return this.$b.va(this.Ak,a)};rq.prototype.getCell=rq.prototype.va;rq.prototype.pe=function(a,b){this.$b.pe(this.Ak,a,b)};rq.prototype.setCell=rq.prototype.pe;rq.prototype.Kf=function(){return this.$b};rq.prototype.getTable=rq.prototype.Kf;function vq(a){var b=wq;if(!a||!eb(a.layerId)||Ya(a.rowFilter)&&!Wa(a.rowFilter)||Ya(a.rowFilterContext)&&!ya(a.rowFilterContext))throw new D(b,1,Ya(\"invalid layer config\")?\"invalid layer config\":a);}function xq(a){return eb(a)&&/^[A-Z][A-Z0-9_]*$/.test(a)}function yq(a){for(var b=a&&a.length,c=2<=b&&\"WKT\"===a[--b]&&\"GEOMETRY_ID\"===a[--b];c&&b--;)c=xq(a[b]);return c}\nfunction zq(a,b){var c=\"\",d=[];if(b){var e=a.geometries;if(e&&e.length){var f=Object.keys(e[0].attributes);c=c+(\"Meta:\\t\"+b+\"\\n\")+f.join(\"\\t\");c+=\"\\tWKT\\n\";for(a=0;a<e.length;a++){var g=e[a].attributes;var h=e[a].geometry;for(b=0;b<f.length;b++)d.push(g[f[b]]);c+=d.join(\"\\t\");c+=\"\\t\"+h+\"\\n\";d=[]}}}else{h={};d=[];if(a.geometries)for(e=0;e<a.geometries.length;e++)b=a.geometries[e],h[b.layerId]||(h[b.layerId]=[]),h[b.layerId].push(b);for(f in h)d.push({layerId:f,geometries:h[f]});for(a=0;a<d.length;a++)c+=\nzq(d[a],d[a].layerId)}return c};function wq(a,b,c){var d=this,e=b&&b.rowFilter,f;wq.g.constructor.call(this,c);C(a,Aq,wq,0);var g=c.resultType;vq(b);if(e){var h=Oa(b);h.rowFilter=e.toString()}else h=b;(new Pi).registerProcessor(\"cle\",\"H.service.extension.worker.processor\");var k=b.layerId;a.request(Bq,Cq,{detail_level:\"all\",layer_id:k},function(l){l=l.layers;var n;for(n=0;n<l.length;n++)if(l[n].layerId===k){h.level=l[n].level;break}f=a.j().clone().A(Dq+\".\"+Cq).B({meta:1});(new Ri(\"cle\",{message:[d.uid,0,{tileSize:d.tileSize,\nprojected:!0,onlyOutline:4===g,serverUrl:f.toString(),layerConfigs:[h],batchTiles:!1,horizontalMargin:1}]})).then(function(){d.mq=!0;d.kb()},d.Dc)},function(l){d.Dc(l.message)})}u(wq,Mp);t(\"H.service.extension.customLocation.TileProvider\",wq);wq.prototype.lu=function(a,b,c){return new cq(a,b,c)};\nwq.prototype.s=function(a,b,c,d,e){var f=this,g=this.getTileKey(a,b,c),h;g=this.Rb().get(g);var k={cancel:je},l=!0,n=this.resultType;g&&(4===n||8===n?g.Eh()||(d(ro.pop(this.tileSize),null),l=!1):(d(z),l=!1));if(l){var p=po.setTimeout(function(){h=new Ri(\"cle\",{message:[f.uid,1,[a,b,c]]});h.then(d,e)},500);k.cancel=function(){h?h.cancel():po.clearTimeout(p)}}return k};wq.prototype.requestInternal=wq.prototype.s;wq.prototype.i=function(){wq.g.i.call(this);new Ri(\"cle\",{message:[this.uid,3]})};function Eq(a){if(a===B)a=\"\\t\";else if(!/^[^\"\\r\\n]$/.test(a))throw new D(Eq,0);this.Ox=String(a).charCodeAt(0);this.ud=A(this.ud,this);this.o=Fq}var Fq=0;m=Eq.prototype;m.getState=function(){return this.o};function Gq(a,b,c){var d=a.o;if(d!==b)throw 1===d&&(a.o=Fq),new vb(c,\"Requires state: \"+[\"READY\",\"PARSE\",\"PAUSE\"][b]+\" but found \"+[\"READY\",\"PARSE\",\"PAUSE\"][d]);}m.abort=function(){Gq(this,2,Eq.prototype.abort);this.o=Fq};\nm.ud=function(a){this.o=Fq;throw new D(Eq.prototype.parse,0,\"Malformed DSV at row \"+this.ad.Br+\" column \"+this.ad.bj+\": \"+a);};function Hq(a,b){var c=[];a.parse(b,function(d,e,f){1>d&&(c[e]=f);return 0<d});a.o=Fq;return c}m.parse=function(a,b,c){Gq(this,Fq,Eq.prototype.parse);a=a.trim();this.ad=new Iq(a,this.Ox,this.ud);this.MB=b;this.Cv=c||ie;this.o=2;this.resume()};m.Cv=ie;\nm.resume=function(){var a=this.ad,b=[];Gq(this,2,Eq.prototype.resume);this.o=1;do{if(!a.Yp){this.o=Fq;break}if(e>a.bj){if(void 0!==c&&c!==e){this.ad.ud(\"The number of columns must be the same for all rows\");return}var c=e}var d=a.Br;var e=a.bj;var f=a.Gl;var g=this.Cv(d,e,a);if(a.Gl>f)for(;-1!==a.next(););else{for(;-1!==(f=a.next());)b.push(f);g=String.fromCharCode.apply(z,b);b.length=0}Jq(a);this.MB(d,e,g)&&(this.o=a.Yp?2:Fq)}while(1===this.o);2!=this.o&&void 0!==c&&0<e&&c!==e&&this.ad.ud(\"The number of columns must be the same for all rows\")};\nfunction Iq(a,b,c){this.ad=new ni(a);this.Es=b;this.Yp=!0;this.Gl=this.Br=this.bj=0;Jq(this);this.ud=c;this.Ac=[];this.Rf=!1}m=Iq.prototype;m.Gl=0;function Jq(a){var b=a.ad.fb();a.Ut=!1;(a.VA=34===b)&&a.ad.next()}function Kq(a,b){var c=a.ad;a.Ut=!0;switch(b){case a.Es:a.bj++;break;case 13:c.next(),10!==c.fb()&&a.ud(\"CR without LF\");case 10:a.bj=0;a.Br++;break;case -1:a.Yp=!1;break;default:a.ud(\"End of field expected\")}c.next();return-1}\nm.fb=function(){if(this.Ut)var a=-1;else{var b=this.ad;a=b.fb();if(this.VA)switch(a){case 34:b.next();a=b.fb();34!==a&&(a=Kq(this,a));break;case -1:this.ud(\"Closing quotation mark expected\")}else switch(a){case 34:this.ud(\"Unexpected quotation mark\");case this.Es:case 13:case 10:case -1:a=Kq(this,a)}}return a};m.vi=function(){this.Rf=!0;this.Ac=[]};m.ih=function(){var a=this.Ac.slice();this.Rf=!1;this.Ac=[];return a};\nm.next=function(){var a=this.fb();-1!==a&&this.ad.next();this.Rf&&this.Ac.push(a);this.Gl++;return a};function Lq(a,b,c,d){d=d||{};if(!b)throw new D(Lq,1,\"has to be a function\");if(!c)throw new D(Lq,2,\"has to be a function\");this.gn=b;this.Ym=c;this.Yg=[];this.Lc={};this.sq=[];this.hh={};this.$r={};this.gs={};this.ex={};this.nj=d.duration||100;this.zm=A(this.zm,this);a=a.split(\"Meta:\\t\").slice(1);for(b=0;b<a.length;b++){d=a[b].split(\"\\n\");c=d[0].split(\"\\t\")[0];d=d.slice(1).join(\"\\n\");this.hh[c]=new Eq;this.Lc[c]=Hq(this.hh[c],d);var e={layerId:c,columnNames:this.Lc[c]};this.sq.push(c);this.ex[c]=\nqq(e);this.$r[c]=Ck();Mq(this,d,c);this.zm(c)}}function Mq(a,b,c){var d=[],e=a.Lc[c].length-1,f=a.ex[c];try{a.hh[c].parse(b,function(g,h,k){var l=!1;0<g&&(d[h]=k,h===e&&(a.Yg.push(f.Rd(f.uo(d))),Ck()-a.$r[c]>a.nj&&(l=!0)));return l},function(g,h,k){if(0<g&&h===e)return qi(k)})}catch(g){a.Ym(g)}}Lq.prototype.cancel=function(){for(var a in this.gs)x.clearTimeout(this.gs[a])};Lq.prototype.cancel=Lq.prototype.cancel;\nLq.prototype.zm=function(a){var b=this,c,d;this.gs[a]=x.setTimeout(function(){if(2===b.hh[a].getState())b.$r[a]=Ck(),b.gn(b.Yg,!1),b.Yg=[],b.hh[a].resume(),b.zm(a);else{c=!0;for(d=0;d<b.sq.length;d++)if(b.hh[b.sq[d]].getState()!==Fq){c=!1;break}c&&(0<b.Yg.length&&b.gn(b.Yg,!0),b.Yg=[])}},0)};function Aq(a){Aq.g.constructor.call(this,Aq,a);lo(Aq)}u(Aq,Ao);t(\"H.service.extension.customLocation.Service\",Aq);Aq.prototype.Da=function(){return{subDomain:\"fleet.ls\",path:\"2\"}};Aq.CONFIG_KEY=\"customLocation\";Aq.prototype.Md=function(a,b){var c=b&&b.resultType;a=new wq(this,a,b);return 1===c||2===c?new gi(a):new zk(a)};Aq.prototype.createTileLayer=Aq.prototype.Md;\nfunction Nq(a,b,c,d){a=a===Oq?\"changes\":\"file\";var e=b[a];var f=eb(e),g=!f&&C(e,Blob);if(!f&&!g)throw new D(d,0,\"Invalid \"+a+\" parameter\");if(Pq)e=g?e:re(e,\"text/plain\"),d=new x.FormData,d.append(a,e,e.name||a+\".wkt\"),c.method=\"POST\",c.data=d,delete b[a];else if(g)throw new D(d,0,\"Sending Blob data is not supported by the browser\");}var Pq=x.FormData&&!!x.FormData.prototype.append;Aq.prototype.request=function(a,b,c,d,e){return this.K(a,b,c,d,e)};Aq.prototype.request=Aq.prototype.request;\nAq.prototype.K=function(a,b,c,d,e){var f=\"text/plain\",g=a===Qq.LAYERS_UPLOAD||a===Qq.LAYERS_MODIFY||a===Qq.LAYERS_IMPORT,h=c,k={data:B,method:\"GET\",headers:this.Lc};if(!a)throw new D(this.request,0,a);if(!b)throw new D(this.request,1,b);Hp(this.request,3,d,e);g&&(C(c,Object,this.request,2,\"Invalid request parameters\"),h=Oa(c),Nq(a,h,k,this.request));var l=this.j().clone().A(a+\".\"+b).B(h);b===Rq.JSON&&(f=\"application/json\");a=new Oe(f,l.toString(),Md,k);a.then(function(n){var p=n.issues;p&&n.error_id&&\nn.response_code?e(Error(p[0].message)):d(n)},function(n){\"error\"===n.type||404===n.status?e(Error(n.statusText||\"Unable to load data\")):n.json().then(function(p){e(Error(\"[\"+p.issues[0].message+\"] \"+l+\" request failed\"))},function(){e(Error(\"[\"+n.statusText+\"] \"+l+\" request failed\"))})});return a};\nvar Bq=\"layers/list\",Oq=\"layers/modify\",Dq=\"tiled/tile\",Qq={LAYERS_DELETE:\"layers/delete\",LAYERS_GRANT:\"layers/access/grant\",LAYERS_LIST:Bq,LAYERS_MODIFY:Oq,LAYERS_UPLOAD:\"layers/upload\",LAYERS_IMPORT:\"layers/import\",SEARCH_ALL:\"search/all\",SEARCH_BBOX:\"search/bbox\",SEARCH_CORRIDOR:\"search/corridor\",SEARCH_PROXIMITY:\"search/proximity\",SEARCH_QUADKEY:\"search/quadkey\",SEARCH_TILE:Dq};Aq.EntryPoint=Qq;var Cq=\"json\",Rq={TXT:\"txt\",JSON:Cq};Aq.EntryPointType=Rq;\nAq.prototype.Sb=function(a,b,c){var d=this;return this.request(\"search/all\",\"txt\",{filter:'WKT==\"\"',layer_id:a},function(e){var f=String(e).replace(/[\\r\\n]+$/g,\"\").split(\"\\t\");d.request(Bq,Cq,{layer_id:a,detail_level:\"all\"},function(g){g=g.layers[0];g.columnNames=f;b(qq(g))},c)},c)};Aq.prototype.getLayer=Aq.prototype.Sb;\nAq.prototype.vu=function(a,b,c,d){function e(){return++g<f?h.request(\"layers/access/grant\",Cq,{layer_id:a,granted_app_id:b[g].grantedAppId,permissions:b[g].permissions.join(\",\")},e,d):h.Sb(a,c,d)}var f=b&&b.length,g=-1,h=this;return e()};Aq.prototype.grantAccess=Aq.prototype.vu;Aq.prototype.zt=function(a,b,c){return this.request(\"layers/delete\",Cq,{layer_ids:a},b,c)};Aq.prototype.deleteLayer=Aq.prototype.zt;\nAq.prototype.kd=function(a,b,c){function d(){setTimeout(function(){k.Sb(g,function(q){setTimeout(e.bind(null,q),n)},function(){64E3>l?(l+=n,d()):c(x.Error(\"Timeout\"))})},n);n*=2}function e(q){var r=JSON.stringify(q.bb()),v=a.grants;if(r!==JSON.stringify(h)){var w=\"Results into different column names on the backend: \"+r;setTimeout(function(){k.zt(g,function(){c(x.Error(w))},function(y){c(x.Error(w+\". \"+y.message))})},n)}else v&&v.length?k.vu(g,v,b,c):b(q)}var f,g,h,k=this,l=0,n=1E3;var p=!a||!xq(g=\na.layerId)&&(f=\"layerId\")||!yq(h=a.columnNames)&&(f=\"columnNames\")?0:Wa(b)?Wa(c)?-1:2:1;if(0<=p)throw new D(k.kd,p,f||arguments[p]);return k.Sb(g,function(){c(x.Error(\"Layer exists already\"))},function(){var q={layer_id:g,file:h.join(\"\\t\")},r=a.level,v=a.storage;r!==B&&(q.level=r);v!==B&&(q.storage=v);k.request(\"layers/upload\",Cq,q,d,c)})};Aq.prototype.createLayer=Aq.prototype.kd;\nAq.prototype.wg=function(a,b,c,d){var e=[],f;a=this.request(a,Cq,b,function(g){g.geometries.length?(g=zq(g,b.layer_id),f=new Lq(g,c,d),e.push(f)):c(ke,!0)},d);e.push(a);return new jq(e)};Aq.prototype.Vc=function(a,b,c,d,e,f){if(!db(a))throw new D(this.Vc,0,\"has invalid type\");C(b,hf,this.Vc,1,\"has invalid type\");if(!hb(c))throw new D(this.Vc,2,\"has invalid type\");Hp(this.Vc,3,d,e);a={layer_ids:a.join(\",\"),proximity:b.lat+\",\"+b.lng+\",\"+c};f&&Qa(a,f);return this.wg(\"search/proximity\",a,d,e)};\nAq.prototype.searchByProximity=Aq.prototype.Vc;Aq.prototype.Uc=function(a,b,c,d,e,f){var g=\"\";if(!db(a))throw new D(this.Uc,0,\"has invalid type\");if(!eb(b)&&!C(b,N))throw new D(this.Uc,1,\"has invalid type\");if(!hb(c))throw new D(this.Uc,2,\"has invalid type\");Hp(this.Uc,3,d,e);a={layer_ids:a.join(\",\"),radius:c};if(eb(b))a.route_id=b;else{var h=b.T;b=0;for(c=h.length;b<c;b+=3)g+=h[b]+\",\"+h[b+1],b<c-3&&(g+=\",\");a.corridor=g}f&&Qa(a,f);return this.wg(\"search/corridor\",a,d,e)};\nAq.prototype.searchByCorridor=Aq.prototype.Uc;Aq.prototype.ne=function(a,b,c,d,e){function f(k,l){l&&h--;c(k,!h)}var g=[],h;if(!db(a))throw new D(this.ne,0,\"has invalid type\");C(b,M,this.ne,1,\"has invalid type\");Hp(this.ne,2,c,d);b={bbox:b.ga+\",\"+b.X+\";\"+b.ha+\",\"+b.da};e&&Qa(b,e);a=b.layer_id?[b.layer_id]:a;e=0;for(h=a.length;e<h;e++)b.layer_id=a[e],g.push(this.wg(\"search/bbox\",b,f,d));return new jq(g)};Aq.prototype.searchByBoundingBox=Aq.prototype.ne;\nAq.prototype.Gr=function(a,b,c,d){var e,f=[];if(!eb(a))throw new D(this.Gr,0,\"has invalid type\");Hp(this.Gr,1,b,c);var g={layer_id:a};d&&Qa(g,d);d=this.request(\"search/all\",Cq,g,function(h){h.geometries.length?(h=zq(h,a),e=new Lq(h,b,c),f.push(e)):b(ke,!0)},c);f.push(d);return new jq(f)};Aq.prototype.searchAll=Aq.prototype.Gr;var Sq={\"delete\":/^GEOMETRY_ID$/,append:/^(?!GEOMETRY_ID$)/};\nfunction Tq(a,b,c,d,e,f){function g(){v++;d(this,v===q)}function h(S){v++;e(S,this,v===q)}var k=\"append\"!==b,l,n={},p=Ra(),q=0,r=[],v=0;if(!db(c))throw new D(f,0,c);Hp(f,1,d,e);for(l=c.length;l--;){var w=c[l];if(C(w,rq)){var y=w.Kf().uh().layerId;var I=w.va(\"GEOMETRY_ID\");if(k){if(I===z||\"\"===String(I))var G='GEOMETRY_ID must not be null or \"\"';n[I=y+\"_\"+I]&&(G=\"same GEOMETRY_ID for multiple rows\");n[I]=w}else I!==z&&\"\"!==String(I)&&(G='GEOMETRY_ID must be null or \"\"')}else G=\"Invalid type\";if(G)throw new D(f,\n0,\"- Invalid row at index \"+l+\", \"+G);I=p[y];I||(I=p[y]=[],q++);I.push(w)}for(y in p){I=p[y];c=[];for(l=I.length;l--;)c.push(I[l].Ak);r.push(a.request(Oq,Cq,{layer_id:y,action:b,changes:I[0].Kf().ks(Sq[b]||null,c)},A(g,I),A(h,I)))}return new jq(r)}Aq.prototype.$s=function(a,b,c){return Tq(this,\"append\",a,b,c,this.$s)};Aq.prototype.appendRows=Aq.prototype.$s;Aq.prototype.wx=function(a,b,c){return Tq(this,\"update\",a,b,c,this.wx)};Aq.prototype.updateRows=Aq.prototype.wx;\nAq.prototype.At=function(a,b,c){return Tq(this,\"delete\",a,b,c,this.At)};Aq.prototype.deleteRows=Aq.prototype.At;W.prototype.uz=function(a){return this.Ua(Aq,a)};W.prototype.getCustomLocationService=W.prototype.uz;function Uq(a){Zo.g.constructor.call(this,Uq,a);lo(Uq)}u(Uq,Ao);t(\"H.service.extension.customRoute.Service\",Uq);Uq.prototype.Da=function(){return{subDomain:\"s.fleet.ls\",path:\"2\"}};Uq.CONFIG_KEY=\"customRoute\";Uq.prototype.od=function(a){return Error(a.issues&&a.issues.length?a.issues.map(function(b){return b.message}).join(\". \"):a)};Uq.prototype.Tg=function(a,b,c){Hp(this.Tg,1,b,c);a=this.j().clone().A(\"calculateroute.json\").B(a);return this.s(a,b,c)};Uq.prototype.calculateRoute=Uq.prototype.Tg;\nW.prototype.vz=function(a){return this.Ua(Uq,a)};W.prototype.getCustomRoutingService=W.prototype.vz;function Vq(a){Vq.g.constructor.call(this,Vq,a);lo(Vq)}u(Vq,Ao);t(\"H.service.extension.geofencing.Service\",Vq);Vq.prototype.Da=function(){return{subDomain:\"fleet.ls\",path:\"2\"}};Vq.CONFIG_KEY=\"geofencing\";Vq.prototype.request=function(a,b,c,d){return this.K(a,b,c,d)};Vq.prototype.request=Vq.prototype.request;Vq.prototype.od=function(a){return Error(a.issues&&a.issues.length?a.issues.map(function(b){return b.message}).join(\". \"):a.message||a.response_code)};\nVq.prototype.K=function(a,b,c,d){if(!a)throw new D(this.request,0,a);if(!Wa(c))throw new TypeError(\"onResult must be a function\");if(!Wa(d))throw new TypeError(\"onError must be a function\");a=this.j().clone().A(a+\".json\").B(b);return this.s(a,c,d)};Vq.EntryPoint={SEARCH_PROXIMITY:\"search/proximity\"};W.prototype.Hz=function(a){return this.Ua(Vq,a)};W.prototype.getGeofencingService=W.prototype.Hz;t(\"H.service.buildInfo\",function(){return Vi(\"H-service\",\"1.54.2\",\"46e6c43\",{region:\"row\"})});\n");